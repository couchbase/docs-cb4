<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference xml:lang="en-us" id="rest-cluster-autofailover-settings">
  <title>
    Retrieving Auto-Failover Settings
  </title>
  <shortdesc>
    Auto-failover settings are retrieved by means of the <codeph>GET /settings/autoFailover</codeph> HTTP method and URI.</shortdesc>
  <refbody>
    
    <section>
      <title>
        HTTP method and URI
      </title>
      
      <p>
        Retrieves auto-failover settings for a cluster. Auto-failover is a
        global setting, which applies to all nodes in the cluster. To read auto-failover settings,
        appropriate privileges are required.
      </p>
      
      <codeblock>GET /settings/autoFailover</codeblock>
      
      <p>
        Parameters include:
      </p>
      
      <p>
        
      </p>
      <ul>
        
        <li>
          <codeph>enabled=[true|false]</codeph>. Enables or disables automatic failover.
        </li>
        
        <li>
          <codeph>timeout=</codeph><i>number-of-seconds</i>. Integer between 5 and 3600. Specifies the number of seconds that must elapse 
          after a node has become unavailable, before automatic failover is triggered.
        </li>
        
        <li>
          <codeph>count=[0|1]</codeph>. Determines whether any node in a
          cluster can be automatically failed-over. After one auto-failover occurs, the
          count is set to 1, and Couchbase Server does not perform another auto-failover
          for the cluster until the count is reset to 0. To fail over more than one node
          at a time in a cluster, perform a manual failover.
        </li>
        
      </ul>

    </section>
    
    <section>
      <title>
        Syntax
      </title>
      
      <p>
        Curl request syntax:
      </p>
      
      <codeblock outputclass="language-bourne">curl -u [admin]:[password] http://[localhost]:8091/settings/autoFailover</codeblock>

    </section>
    
    <section>
      <title>Example
      </title>
      
      <p>
        Curl request example:
      </p>
      
      <codeblock outputclass="language-bourne">curl -u Administrator:password http://10.5.2.54:8091/settings/autoFailover</codeblock>
    </section>
    
    <section>
      <title>
        Response
      </title>
      
    <p>
      If successful, execution returns the auto-failover settings for the cluster. For example:
    </p>
      
      <codeblock outputclass='language-javascript'>{
  "enabled": true,
  "timeout": 72,
  "count": 0,
  "failoverOnDataDiskIssues": {
    "enabled": true,
    "timePeriod": 89
  },
    "failoverServerGroup": true,
    "maxCount": 2
}</codeblock>
     
    </section>

    
    <section>
      <title>
        Response codes
      </title>
      
    <p>
      Possible errors include:
    </p>
      
      <codeblock outputclass="language-bourne">HTTP/1.1 401 Unauthorized
This endpoint isn't available yet.</codeblock>
      <codeblock outputclass="language-bourne">GET /settings/autoFailover HTTP/1.1
Host: localhost:8091
Authorization: Basic YWRtaW46YWRtaW4=
Accept: */*</codeblock>
      <codeblock outputclass="language-bourne">HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: nnn
{ "enabled": false, "timeout": 30, "count": 0 }</codeblock>
    </section>
  </refbody>
</reference>
