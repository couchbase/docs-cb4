<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference xml:lang="en-us" id="rest-cluster-autofailover">
  
  <title>
    Managing Auto-Failover
  </title>
  
  <shortdesc>
    Auto-failover is managed with with the <codeph>GET /settings/autoFailover</codeph> HTTP method and URI.
  </shortdesc>
  
  <refbody>
    
    <section>
      <title>
        Description
      </title>
      
    <p>This section provides information about retrieving, enabling, disabling, and resetting
      auto-failover.
    </p>
      
      <table>
        <title>
          Auto-Failover Endpoints
        </title>
        
        <tgroup cols="3">
          <colspec colname="col1" colwidth="0.6*"/>
          <colspec colname="col2" colwidth="1.3*"/>
          <colspec colname="col3" colwidth="3.6*"/>
          
          <thead>
            <row>
              <entry>HTTP method</entry>
              <entry>URI path</entry>
              <entry>Description</entry>
            </row>
          </thead>
          
          <tbody>
            <row>
              <entry>GET</entry>
              
              <entry><filepath>/settings/autoFailover</filepath></entry>
              
              <entry>
                Retrieves automatic failover settings. Parameters include: 
                
                <ul>
                  
                  <li>
                    <codeph>enabled=[true|false]</codeph>. Enables or disables automatic failover.
                  </li>
                  
                  <li>
                    <codeph>timeout=</codeph><i>number-of-seconds</i>. Integer between 30 and 3600. Specifies the number of seconds
                    that must elapse, with a node unavailable, before automatic failover is triggered.
                  </li>
                  
                  <li>
                    <codeph>count=[0|1]</codeph>. Determines whether any node in a
                    cluster can be automatically failed-over. After one auto-failover occurs, the
                    count is set to 1, and Couchbase Server does not perform another auto-failover
                    for the cluster unless the count is reset to 0. To fail over more than one node
                    at a time in a cluster, perform a manual failover.
                  </li>
                  
                </ul>
                
              </entry>
              
            </row>
            
            <row>
              <entry>POST</entry>
              
              <entry><filepath>/settings/autoFailover</filepath></entry>
              
              <entry>
                Enables and disables automatic failover. Uses the following paramenters:
                
                <ul>
                  <li>
                    <codeph>enabled=[true|false]</codeph>. Enables or disables automatic failover.
                  </li>
                  
                  <li>
                    <codeph>timeout=</codeph><i>number-of-seconds</i>. Integer between 30 and 3600. Specifies the number of seconds
                    that must elapse, with a node unavailable, before automatic failover is triggered.
                  </li>
                  
                  <li>
                    <codeph>failoverServerGroup=[true|false]&amp;maxCount=</codeph><i>number-of-seconds</i>. 
                    Specifies whether automatic failover is enabled for server groups, and specifies the number of seconds that must elapse, with
                    a group unavailable, before automatic failover is triggered.
                    Do not enable failover for server groups unless you have set up three of more server groups, and have the capacity 
                    to absorb the load of any failed-over group.
                  </li>
                  
                  <li>
                    <codeph>failoverOnDataDiskIssues[enabled]=[true|false]&amp;failoverOnDataDiskIssues[timePeriod]=</codeph><i>number-of-seconds</i>.
                    Enables or disables automatic failover for sustained data-disk read/write failures, after the specied time-period.
                  </li>
                  
                  
                  
                </ul>
                
              </entry>
              
            </row>
            <row>
              <entry>POST</entry>
              <entry><filepath>/settings/autoFailover/resetCount</filepath></entry>
              <entry>Resets automatic failover count to 0.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </section>
  </refbody>
</reference>
