<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_rr5_sv3_t5">
  <title>Enterprise Backup and Restore service</title><shortdesc>In addition to the existing <cmdname>cbbackup</cmdname> tool, 
    Couchbase Server Enterprise Edition will support a new Backup and Restore service.</shortdesc>
  <body>
    <p>The<xref
        href="http://developer.couchbase.com/documentation/server/4.1/cli/cbbackup-tool.html"
        format="html" scope="external">cbbackup</xref> tool remains available both for the Community
      and Enterprise editions of Couchbase Server, but the new Backup and Restore service will be
      supported only for Couchbase Server Enterprise Edition.</p>
    <p>The <xref
        href="http://developer.couchbase.com/documentation/server/4.1/backup-restore/backup-cbbackup.html"
        format="html" scope="external">cbbackup</xref> tool enables you to back up a single node, a
      single bucket or the entire cluster into a flexible backup structure, which can restore the
      data into the same, or different, clusters and buckets. While <cmdname>cbbackup</cmdname>
      tool, combined with the <xref
        href="http://developer.couchbase.com/documentation/server/4.1/backup-restore/restore-cbrestore.html"
        format="html" scope="external">cbrestore</xref> tool, offers an easy and flexible solution
      to handle data including incremental backups, the new service is more convenient and efficient
      when handling large, multiple GB of data. </p>
    <p>Using the Backup and Restore service,  you can back up and restore only the new data. For
      example, perform a full backup once every week and then make incremental backups on a daily
      basis. Each of the incremental backups will take a fraction of the time needed for the full
      backup.</p>
    <p>In addition to incremental backups of new data, the new Backup and Restore service can also
      perform backups of particular specified bucket objects (such as keys).</p>
    <section><title>Backup</title>
      <p>Only the full Couchbase administrators can use the Backup and Restore service to back up
        and restore data. </p>
      <p>Couchbase Server backs up all the data up to the high sequence number of each VBucket. </p>
     
      <p><image href="pict/BR-service.png" id="image_bdw_4tl_55" align="left" width="400"/></p>
      <p>The amount of time needed for a backup depends on the network card bandwidth  (3) or the
        disk bandwidth on a particular node (4). </p>
      <dl>
        <dlentry>
          <dt>Backup scenarios</dt>
          <dd>Backup targets include: <ul>
              <li>Full backup of an entire cluster</li>
              <li>Full backup on an entire bucket</li>
              <li>Incremental backup of a cluster </li>
              <li>Incremental backup of a bucket</li>
              <li>Backup of the particular bucket objects (for example, regex based on keys)</li>
            </ul></dd>
        </dlentry>
      </dl>
      <dl>
        <dlentry>
          <dt>Type of backed up data</dt>
          <dd>You can choose what kind of data you want to back up, such as: <ul>
              <li>Cluster or bucket configuration </li>
              <li>Views definitions</li>
              <li>GSI definitions </li>
              <li>Data</li>
            </ul></dd>
        </dlentry>
      </dl>
      <dl>
        <dlentry>
          <dt>Backup workflow</dt>
          <dd>Once you decide what to back up, you can create a backup set and name it. Then, when
            you run this service, you provide the backup set name, and the backup process will start
            where the last backup in the set left off. </dd>
          <dd>Each backup timeline has a name, and each backup occurrence has a timestamp value. </dd>
          <dd>Backups are captured in backup logs.</dd>
        </dlentry>
      </dl> 
    
  </section>
    <section><title>Restore</title>
   <p>To restore the backed up data, specify a range of backups within the backup set using the
        start and end timestamp. You can also use a command to list the backups within the backup
        set to figure out the start and end timestamp.  </p>
     
      <dl>
        <dlentry>
          <dt>Restore granularity</dt>
          <dd>When restoring the backed-up data, you can choose whether to restore: <ul>
              <li>An entire backup timeline:<ul>
                  <li>Restore the full backup of a whole cluster</li>
                  <li> Restore the full backup of a whole bucket</li>
                </ul></li>
              <li>A backup timeline between particular start and end timestamp values: <ul>
                  <li>full backup of an entire cluster</li>
                  <li>full backup of an entire bucket</li>
                  <li>an incremental backup to a particular backup occurrence timestamp </li>
                </ul></li>
              <li>Specified bucket objects.</li>
            </ul></dd>
          
        </dlentry>
      </dl>
      
      
      
    </section>
   
  </body>
</topic>
