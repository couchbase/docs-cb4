<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_gbk_tyh_t5">
  <title>Release Notes for Couchbase Server 5.0.x</title>
  <body>
    <p>Couchbase Server 5.0 delivers exciting capabilities for cross datacenter replication,
      security, query, search, tools, and application development. Take a look at <xref
        href="../introduction/whats-new.dita">What's new</xref> for a list of new features and
      improvements that are available in this release. </p>
    <section id="release-501"><title>Release 5.0.1</title>
      <p>Couchbase Server 5.0.1, released in December 2017, supersedes version 5.0.0 released
        earlier this year. Version 5.0.1 is the first maintenance release in the 5.0.x series for
        Couchbase Server. </p>
      <p outputclass="h3" id="fixed-issues-501"><b>Fixed Issues</b></p>
      
      <p><b>Cross Datacenter Replication (XDCR)</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_xdcr_501">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27162" format="html"
                scope="external">MB-27162</xref></entry>
              <entry>Revision-based conflict resolution did not work as expected as the revision
                number was not updated for a create that immediately followed a delete operation.
                The revision number of a deleted document was updated after the item was added to
                the checkpoint queue, which meant that when you recreate that document, the revision
                number was not being replicated intra-cluster or via XDCR. This has been fixed. </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      
      <p><b>Security</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_security_501">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27203" format="html"
                scope="external">MB-27203</xref></entry>
              <entry>The "<parmname>default</parmname>" bucket is a bucket that in
                versions prior to 5.0 was either suggested or automatically created for users during
                the install and configuration process with a goal of being compatible with memcached
                out of the box. As its intention was to allow users to quickly get started with
                Couchbase it permitted anonymous access, consistent with memcached behavior.
                Starting 5.0, all buckets require authenticated access. <p>However, there was a bug in 5.0.0
                  where under certain circumstances anonymous access could be allowed to the bucket.
                  This issue only affected a bucket with the name "<parmname>default</parmname>" and
                  could only be triggered by an authenticated user with administrative permissions. This
                  issue has been fixed. </p></entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Tools</b></p><p>
        <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_tools_501">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="2.64*"/>
            <thead>
              <row>
                <entry>Issue</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-26556" format="html"
                  scope="external">MB-26556</xref></entry>
                <entry>The <cmdname>couchbase-cli cluster-init</cmdname> command failed to
                  initialize all services in the Community Edition as the default storage mode
                  incorrectly pointed to Plasma, which is available in the Enterprise Edition,
                  instead of ForestDB.</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
        </p>
    </section>
    <section id="release-500"><title>Release 5.0.0</title>
      <p>Couchbase Server 5.0.0 was released in October 2017. This release includes <xref href="../introduction/whats-new.dita">new features</xref> and behavior changes. The following sections list the behavior changes, fixed issues, known issues, and deprecated items.</p>
      <p outputclass="h3" id="change-behavior"><b>Major Behavior Changes Compared to Version 4.6</b></p>
      <p>Here are the behavior changes in the product, compared to the previous (4.6.x) release.</p>
      <p>
        <ul id="ul_dhx_b15_xz">
          <li>Newly created buckets in 5.0 (including sample buckets) do not have any passwords
            associated with them. To access a bucket, a user must be created with appropriate roles
            to access using RBAC. See <xref
              href="../security/security-roles.dita"
              >Bucket Full Access</xref> for details.</li>
          <li>Important: Many 5.0 features require the latest versions of Couchbase SDK.
            It is critical to update the SDK before updating to 5.0. Upgrade according to the SDK
            versions listed in the <xref href="#topic_gbk_tyh_t5/sdk-compatibility" format="dita"
              >SDK Compatibility</xref> chart below.</li>
          <li>The TAP protocol which was previously deprecated, is now removed. TAP is an internal
            protocol that streams information about data changes between cluster nodes. TAP is
            replaced with a new protocol called Database Change Protocol (<xref
              href="../architecture/high-availability-replication-architecture.dita#concept_hj1_njj_vs"
              >DCP</xref>).</li>
          <li>Starting 5.0, port based buckets can only be created now through the bucket CLI
            command. Use the <xref
              href="../cli/cbcli/couchbase-cli-bucket-create.html#couchbaseclibucketcreate1.idm386415259904" format="html"
            /> command to create a port based bucket. <note type="remember">Server-side moxi which
              drives port based bucket creation has been deprecated. Consider using client-side moxi
              instead.</note></li>
          <li>For Windows, <filepath>.exe</filepath> installers which were previously deprecated are
            now removed and replaced with industry-standard MSI installer files. Consequently, any
            upgrade for the Windows platform from pre-5.0 version to 5.0 will need to be done in a
            rolling upgrade fashion. See <xref
              href="../install/upgrade-online.dita#topic_t2x_k2v_xs"/> for details.</li>
          <li>Re-designed <xref href="../admin/ui-intro.dita#topic1980">Couchbase Web
            Console</xref>.</li>
        </ul>
      </p>
      
      <p outputclass="h3" id="known-issues-limitations"><b>Known Issues and Limitations</b></p>
      <p>The following table lists some of the known issues in this release.</p>
      <table frame="all" rowsep="1" colsep="1" id="table_zgb_11j_qbb">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27203" format="html"
                scope="external">MB-27203</xref></entry>
              <entry><b>Summary</b>: The "<parmname>default</parmname>" bucket is a bucket that in
                versions prior to 5.0 was either suggested or automatically created for users during
                the install and configuration process with a goal of being compatible with memcached
                out of the box. As its intention was to allow users to quickly get started with
                Couchbase it permitted anonymous access, consistent with memcached behavior.
                Starting 5.0, all buckets require authenticated access. Also in 5.0 there is a bug
                where under certain circumstances anonymous access can be allowed to the bucket.
                This issue only affects a bucket with the name "<parmname>default</parmname>" and
                can only be triggered by an authenticated user with administrative permissions. This
                issue will be fixed in the next maintenance release.<p><b>Workaround</b>: Do not
                  define a bucket named "<parmname>default</parmname>" in your cluster
                  configuration.</p></entry>
            </row>
            <row>
              <entry><xref
                href="https://issues.couchbase.com/browse/MB-26171" format="html"
                scope="external">MB-26171</xref></entry>
              <entry><b>Summary</b>: Creating two XDCR replications to the same cluster with
                different users is not supported.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26126" format="html"
                scope="external">MB-26126</xref></entry>
              <entry><b>Summary</b>: When using Couchbase Server 5.0 with Sync Gateway 1.5+ and the
                Mobile Convergence feature is enabled in Sync Gateway (enable_shared_bucket_access),
                the count of non-resident documents reported in the UI may be incorrect.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26085" format="html"
                scope="external">MB-26085</xref></entry>
              <entry><b>Summary</b>: Rebalance failure is observed if the index planner takes a long
                time ( > ns-server timeout) to execute.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26065" format="html"
                scope="external">MB-26065</xref></entry>
              <entry><b>Summary</b>: Rebalance exits when loading the memcached RBAC file.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26037" format="html"
                scope="external">MB-26037</xref></entry>
              <entry><b>Summary</b>: During a rebalance, if the destination node for a particular
                vBucket already has a previous, outdated version of that vBucket then the rebalance
                can initially fail. <p><b>Workaround</b>: Retry the rebalance; the second attempt
                  should succeed.</p></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26022" format="html"
                scope="external">MB-26022</xref></entry>
              <entry><b>Summary</b>: When a source topology changes, while the docs_processed and
                changes_left stats are both recomputed, only the changes_left stats in the
                statistics overview are updated. This leads to incorrect docs_processed and
                incorrect, potentially negative changes_left statistics. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-25938" format="html"
                scope="external">MB-25938</xref></entry>
              <entry><b>Summary</b>: Potential corruption of documents with extended
                attributes(XATTRs) during high concurrency. <p>If a document contains extended
                  attributes (XATTRs) and a Key/Value mutation request changes one of those XATTRs,
                  the previous XATTR values are written to in a non-atomic way. This means that
                  there is a potential race if another concurrent request was also accessing the
                  same document at the same time. The other request could read a partial or
                  corrupted value for the document.</p>Note that this issue is believed to be very
                rare and has only been seen under synthetic data race analysis.
                <p><b>Workaround</b>: Do not modify XATTRs on documents which already have them.
                </p></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-25935" format="html"
                scope="external">MB-25935</xref></entry>
              <entry><b>Summary</b>: Data Service returns TEMP_FAIL for locked keys instead of
                LOCKED. <p>Data Service 5.0 adds extended error codes (XERROR) to provide richer
                  error handling between newer, smart SDKs and the server. As part of this,
                  attempting to mutate a document which is locked should return ERROR_LOCKED,
                  however it incorrectly returns TEMP_FAIL.</p><b>Workaround</b>: Check for both
                LOCKED and TEMP_FAIL error codes when using pessimistic locking. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-25909" format="html"
                scope="external">MB-25909</xref></entry>
              <entry><b>Summary</b>: When you upgrade the source node in a unidirectional
                replication from 4.1 to 4.6, the GoGC global setting was set to 0 instead of a
                higher number. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-25785" format="html"
                scope="external">MB-25785</xref></entry>
              <entry><b>Summary</b>: Resuming a backup process on ephemeral buckets fails if there
                was a data service rollback in the original backup that failed. This issue is
                observed when there is a failover shortly after starting the first backup in a
                backup repository. removing the original backup. <p><b>Workaround</b>: Remove the
                  original backup by using the --purge flag and then start the backup process again.
                </p></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-25707" format="html"
                scope="external">MB-25707</xref></entry>
              <entry><b>Summary</b>: UI errors in XDCR are observed even though XDCR continues to
                function. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-23074" format="html"
                scope="external">MB-23074</xref></entry>
              <entry><b>Summary</b>: Performance issues may be observed when running Couchbase
                Server on CentOS 7.3 with kernel 3.10.0-514.6. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-22679" format="html"
                scope="external">MB-22679</xref></entry>
              <entry><b>Summary</b>: The Full Text Search service doesn't delete pindex files when
                deleting the index after a MOSS crash. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-21772" format="html"
                scope="external">MB-21772</xref></entry>
              <entry><b>Summary</b>: Full Text Search queries fail under high load on multi-node
                cluster due to a large number of connections.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-12000" format="html"
                scope="external">MB-12000</xref></entry>
              <entry><b>Summary</b>: The rebalance progress reported during delta recovery is
                confusing as certain phases like warmup are not tracked.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p>This section lists some of the limitations in different areas across the product:</p>
      <table frame="all" rowsep="1" colsep="1" id="table_wbm_p3s_dz">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.66*"/>
          <thead>
            <row>
              <entry>Area</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>Powerful Query, Indexing, and Search</entry>
              <entry>
                <ul id="ul_okg_4p5_xz">
                  <li><b>Index Replicas Placement</b><p dir="ltr">When deciding the index nodes to
                    place index replicas, the system takes into account to not place replicas onto
                    the same node, and to distribute the replicas across as many server groups as
                    possible. It then chooses the nodes the have the fewest number of indexes to
                    place the replicas. In the future, we will improve the replica placement
                    algorithm to better optimize the memory, CPU, and disk usage across the index
                    nodes.</p></li>
                  <li>
                    <b>Index Rebalance</b>
                    <p dir="ltr">When adding new indexer nodes to a cluster to increase the capacity
                      for indexes, the system will not move existing indexes onto the new nodes. To
                      rebalance indexes from existing nodes to the new nodes, user needs to eject
                      the existing nodes and add the new nodes. The system will then move indexes
                      from the ejected nodes to the new nodes while balancing resource utilization.
                      This is known as swap rebalance.</p><p dir="ltr">Rebalance will not take into
                        consideration any explicit index placement specified when an index was
                        created. A user cannot perform create/drop/build index during index
                        rebalance.</p></li>
                  <li>
                    <b>Online Index Upgrade</b>
                    <p dir="ltr">To perform online upgrade from version 4.x, you need to make sure
                      all indexes on an index have at least one equivalent index (index with same
                      definition) on other nodes. One then fails-over the index node, upgrades the
                      node to version 5.0, and then adds the node back to the cluster. While the
                      node is failed-over, the equivalent indexes on other nodes will be leveraged
                      for queries.</p><p dir="ltr">Once the system has been upgraded to 5.0, you can
                        use swap rebalance to perform online upgrade to future versions.</p></li>
                </ul>
              </entry>
            </row>
            <row>
              <entry morerows="3">Upgrade</entry>
              <entry>
                <p>If you are using GSI indexes with a previously GA'd release of Couchbase (such as
                  4.x) or Couchbase 5.0 Beta versions, we suggest that you drop the older index
                  definitions and recreate them using 5.0 GA version with Plasma, the newly
                  introduced storage engine for GSI. </p>
              </entry>
            </row>
            <row>
              <entry>N1QL Application Continuity: <p>In 5.0 Beta 1 release, N1QL introduced multiple
                performance enhancements enabled by a new internal protocol between Query and
                Index services. While upgrading large Couchbase cluster deployments, the cluster
                may be in a state where different Couchbase services are running on different
                versions. In such scenarios, this feature ensures seamless continuity for N1QL
                queries and applications irrespective of whether the query and indexing services
                are running a 4.x or 5.0 version. The N1QL clients can avail the 5.0 features and
                performance only when the issued query is processed by 5.0 query and indexing
                services.</p></entry>
            </row>
            <row>
              <entry>Many 5.0 features require the latest versions of Couchbase SDK. It is critical
                to update the SDK before updating to 5.0. Upgrade according to the SDK versions
                listed in the <xref href="#topic_gbk_tyh_t5/sdk-compatibility" format="dita">SDK
                  Compatibility</xref> chart.</entry>
            </row>
            <row>
              <entry>We’ve replaced the Windows <filepath>.exe</filepath> installers with
                industry-standard MSI installer files in this release. Consequently, only rolling
                upgrades from 4.x or earlier versions to 5.0 are supported. <!--In future, we plan to
                support normal in-place upgrades from 5.0 to newer versions.--></entry>
            </row>
            <row id="sdk-compatibility">
              <entry>SDK Compatibility</entry>
              <entry>Many 5.0 features require you to upgrade your client SDK versions. The minimum
                versions that support the latest 5.0 features are shown below, newer versions are available through the
                Release Notes link.  Regardless of needing
                new features, it is always advised to upgrade to the newest SDK version.<p>
                  <table frame="all" rowsep="1" colsep="1" id="table_o1h_fmv_xz">
                    <tgroup cols="3">
                      <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                      <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                      <colspec colname="c3" colnum="3" colwidth="2.3*"/>
                      <thead>
                        <row>
                          <entry>SDK</entry>
                          <entry>Min. Version for 5.0</entry>
                          <entry>Reference</entry>
                        </row>
                      </thead>
                      <tbody>
                        <row>
                          <entry>Java</entry>
                          <entry>2.5.1</entry>
                          <entry><xref
                            href="https://developer.couchbase.com/server/other-products/release-notes-archives/java-sdk"
                            format="html" scope="external">Release notes</xref></entry>
                        </row>
                        <row>
                          <entry>.NET</entry>
                          <entry>2.5.0</entry>
                          <entry><xref
                            href="https://developer.couchbase.com/server/other-products/release-notes-archives/dotnet-sdk#2.4.5"
                            format="html" scope="external">Release notes</xref></entry>
                        </row>
                        <row>
                          <entry>Node.js</entry>
                          <entry>2.4.0</entry>
                          <entry><xref
                            href="https://developer.couchbase.com/server/other-products/release-notes-archives/nodejs-sdk"
                            format="html" scope="external">Release notes</xref></entry>
                        </row>
                        <row>
                          <entry>Python</entry>
                          <entry>2.2.6</entry>
                          <entry><xref
                            href="https://developer.couchbase.com/server/other-products/release-notes-archives/python-sdk"
                            format="html" scope="external">Release notes</xref></entry>
                        </row>
                        <row>
                          <entry>PHP</entry>
                          <entry>2.4.0</entry>
                          <entry><xref
                            href="https://developer.couchbase.com/server/other-products/release-notes-archives/php-sdk"
                            format="html" scope="external">Release notes</xref></entry>
                        </row>
                        <row>
                          <entry>Go</entry>
                          <entry>1.2.5</entry>
                          <entry><xref
                            href="https://developer.couchbase.com/server/other-products/release-notes-archives/go-sdk"
                            format="html" scope="external">Release notes</xref></entry>
                        </row>
                        <row>
                          <entry>C</entry>
                          <entry>2.8.0</entry>
                          <entry><xref
                            href="https://developer.couchbase.com/server/other-products/release-notes-archives/c-sdk"
                            format="html" scope="external">Release notes</xref></entry>
                        </row>
                      </tbody>
                    </tgroup>
                  </table>
                </p></entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      
      <p outputclass="h3" id="fixed-issues-500"><b>Fixed Issues</b></p>
      <p>This section lists some of the important fixed issues in this release.</p>
      <p><b>Data Service</b></p><p>
        <table frame="all" rowsep="1" colsep="1" id="table_tbm_p3s_dz2">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="2.64*"/>
            <thead>
              <row>
                <entry>Issue</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-23976" format="html"
                    scope="external">MB-23976</xref></entry>
                <entry>The TOUCH command modifies a document and updates a CAS value too. However,
                  the result of TOUCH incorrectly used a pre-updated CAS value and did not reflect
                  the updated CAS. </entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-21156" format="html"
                    scope="external">MB-21156</xref></entry>
                <entry>As part of a number of improvements to logging, fixed an issue where
                  couchdb.log wrapped too quickly.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-20091" format="html"
                    scope="external">MB-20091</xref></entry>
                <entry>Improvements to ForestDB's thread handling for improved compaction.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-16150" format="html"
                    scope="external">MB-16150</xref></entry>
                <entry>Fixed inconsistency in curr_items with full reviction on Data Greater than
                  Memory (DGM).</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-13087" format="html"
                    scope="external">MB-13087</xref></entry>
                <entry>When an item is locked and there’s actually a lot of load on the server, the
                  server now returns a PROTOCOL_BINARY_RESPONSE_LOCKED response to the client
                  application if the client application has enabled extended error codes.</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </p><p><b>Full Text Search Service</b></p><table frame="all" rowsep="1" colsep="1"
        id="table_lfz_qr5_xz">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-23271" format="html"
                  scope="external">MB-23271</xref></entry>
              <entry>To improve readability, the stat keys in section mossScope are now sorted.
              </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-22560" format="html"
                  scope="external">MB-22560</xref></entry>
              <entry>The FTS ports now adjust SSL cipher levels based on the
                COUCHBASE_SSL_CIPHER_LIST environment variable. SSL ciphers can be set to LOW,
                MEDIUM, or HIGH(default) levels.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-21855" format="html"
                  scope="external">MB-21855</xref></entry>
              <entry>Improved error messages for the following scenarios: <ul id="ul_vpb_1jj_qbb">
                  <li>Creating an index with a name that already exists.</li>
                  <li>Creating an alias without target index.</li>
                </ul></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-20939" format="html"
                  scope="external">MB-20939</xref></entry>
              <entry>Improved memory usage and resource containment for Full Text Indexes.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-18042" format="html"
                  scope="external">MB-18042</xref></entry>
              <entry>We’ve removed the Byte Array Converter dropdown on the Advanced tab of the Full
                Text Index editor as it contained a single value that couldn’t be changed. <p>Note
                  that index definitions created in earlier releases will not work unless you remove
                  the "byte_array_converter": "json" attribute value pair from the index definition
                  JSON.</p></entry>
            </row>
          </tbody>
        </tgroup>
      </table><p><b>Indexing Service</b></p><table frame="all" rowsep="1" colsep="1"
        id="table_lfz_qr5_xz2">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-21594" format="html"
                  scope="external">MB-21594</xref></entry>
              <entry>Duplicate partitions removed during rebalance to prevent OOM (Out Of Memory
                error), and subsequent recovery problems.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-20297" format="html"
                  scope="external">MB-20297</xref></entry>
              <entry>For an index that was built with defer_build:true, the CREATE INDEX statement
                on the Indexes tab showed an invalid N1QL statement that could not be copied to run
                as is using cbq or the Query Workbench.</entry>
            </row>
          </tbody>
        </tgroup>
      </table><p><b>Installer</b></p><p><table frame="all" rowsep="1" colsep="1"
          id="table_ubm_p3s_ez">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="2.64*"/>
            <thead>
              <row>
                <entry>Issue</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-22283" format="html"
                    scope="external">MB-22283</xref></entry>
                <entry>Installing and running Couchbase Server as a non-root and non-sudo user is
                  now supported. </entry>
              </row>
            </tbody>
          </tgroup>
        </table>
        <b>Query Service</b></p><p>
        <table frame="all" rowsep="1" colsep="1" id="table_ubm_p3s_dz">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="2.64*"/>
            <thead>
              <row>
                <entry>Issue</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-25103" format="html"
                    scope="external">MB-25103</xref></entry>
                <entry>Query Service authentication failed when the password contained a colon (":")
                  character.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-24429" format="html"
                    scope="external">MB-24429</xref></entry>
                <entry>When fetching data, if the data node failed to respond due to some reason,
                  the query could hang as there was no timeout specified. This has been addressed by
                  passing the query request timeout parameter when fetching data. </entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-23150" format="html"
                    scope="external">MB-23150</xref></entry>
                <entry>The monitoring view for running queries provides details such as the node
                  that’s processing the request, the client IP that initiated the request, and the
                  running program type (i.e. WorkBench, CBC, Java, .NET, CBQ, etc.). This helps
                  isolate rogue queries and unauthorized access.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-22831" format="html"
                    scope="external">MB-22831</xref></entry>
                <entry>Inserting a numerical value using a N1QL query caused the value to be stored
                  in scientific notation.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-22273" format="html"
                    scope="external">MB-22273</xref></entry>
                <entry>In Couchbase clusters with multiple query service nodes, applications may get
                  incorrect results from prepared N1QL queries that use covering indexes.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-22119" format="html"
                    scope="external">MB-22119</xref></entry>
                <entry>When using ARRAY expressions, query service may rarely panic with error
                  referring to ‘slice allocations’.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-22105" format="html"
                    scope="external">MB-22105</xref></entry>
                <entry>The UPDATE, INSERT, UPSERT statements may fail with the error message:
                  "Panic: : runtime error: slice bounds out of range", when running with increased
                  pipeline_batch settings.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-22093" format="html"
                    scope="external">MB-22093</xref></entry>
                <entry>The query engine may intermittently throw error code 12008 because of a
                  memory allocation failure.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-21928" format="html"
                    scope="external">MB-21928</xref></entry>
                <entry>The command line shell for N1QL, cbq, now connects to 8091 with http and
                  18091 with https by default when the port is not specified.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-19893" format="html"
                    scope="external">MB-19893</xref></entry>
                <entry>The SELECT RAW did not take ORDER BY into account, thus the results were not
                  ordered. </entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-18769" format="html"
                    scope="external">MB-18769</xref></entry>
                <entry>Fixed an issue where a covered query with meta().type in the WHERE clause
                  gave in correct results.</entry>
              </row>
              
            </tbody>
          </tgroup>
        </table>
      </p><p><b>Security</b></p><p>
        <table frame="all" rowsep="1" colsep="1" id="table_wbm_p3s_dz2">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="2.64*"/>
            <thead>
              <row>
                <entry>Issue</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-24088" format="html"
                    scope="external">MB-24088</xref></entry>
                <entry>The secrets management feature fails to encrypt secrets larger than 4KB (such
                  as SSL certificates). This causes the cluster manager to unexpectedly terminate
                  when saving the cluster configuration to disk.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-15624" format="html"
                    scope="external">MB-15624</xref></entry>
                <entry>You can now specify a SSL cipher list on Windows platform.</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </p><p><b>Tools</b></p><p><table frame="all" rowsep="1" colsep="1" id="table_wbm_p3s_dz3">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="2.64*"/>
            <thead>
              <row>
                <entry>Issue</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-25669" format="html"
                    scope="external">MB-25669</xref></entry>
                <entry>On Windows platform, the cbimport tool failed to import a tab delimited CSV
                  file where the tab is specified using '\t' or '\\t'. </entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-20403" format="html"
                    scope="external">MB-20403</xref></entry>
                <entry>The cbbackupmgr merge command did not function correctly and caused data
                  corruption under the following circumstances: <ul id="ul_hlv_vmj_qbb">
                    <li>The bucket being backed up was flushed between incremental backups.</li>
                    <li>The bucket being backed up was deleted and re-created in between incremental
                      backups.</li>
                    <li>The bucket had not been backed up between a document's deletion and the
                      metadata for that deleted document being purged. </li>
                    <li>There had been a failover between incremental backups of the bucket. </li>
                  </ul></entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-10093" format="html"
                    scope="external">MB-10093</xref></entry>
                <entry>Xmem XDCR network bandwidth can now be throttled if desired.</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
        <b>Web Console</b></p><p>
        <table frame="all" rowsep="1" colsep="1" id="table_wbm_p3s_dz1">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="2.64*"/>
            <thead>
              <row>
                <entry>Issue</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-23251" format="html"
                    scope="external">MB-23251</xref></entry>
                <entry>The AutoComplete feature for the password field on the Web Console has been
                  disabled.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-12480" format="html"
                    scope="external">MB-12480</xref></entry>
                <entry>The text displayed when changing the RAM quota for a bucket was misleading
                  and has been fixed to reflect the actual ranges that the server will allow the
                  bucket to be sized within. </entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-9658" format="html"
                    scope="external">MB-9658</xref></entry>
                <entry>The Web Console document browser for a bucket displays the ID and content
                  sample of the documents in the bucket. The UI displayed only the first 16
                  characters and affected usability when viewing documents with keys longer than 16
                  characters. This has been fixed to display the full key name and wrap to the next
                  line if needed.</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </p><p><b>XDCR</b></p><p>
        <table frame="all" rowsep="1" colsep="1" id="table_wbm_p3s_dz4">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="2.64*"/>
            <thead>
              <row>
                <entry>Issue</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-22514" format="html"
                    scope="external">MB-22514</xref></entry>
                <entry>The XDCR target topology change detection process resulted in a large number
                  of open connections which caused a high CPU usage. This has been fixed by reducing
                  the number of connections to the target bucket.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-22172" format="html"
                    scope="external">MB-22172</xref></entry>
                <entry>If a mutation needs to be resent, sent_time is updated so that next mutation
                  can be sent at the appropriate interval.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-21369" format="html"
                    scope="external">MB-21369</xref></entry>
                <entry>Fixed a replication connection leak caused by a failure to close connections
                  to source nodes from the pipeline supervisor when replication was stopped. </entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-18961" format="html"
                    scope="external">MB-18961</xref></entry>
                <entry>Reduced default GoXDCR DCP checkpoint interval to 10 minutes for better
                  progress during disruptions.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-10093" format="html"
                    scope="external">MB-10093</xref></entry>
                <entry>The XDCR network bandwidth can now be tuned using the Bandwidth Usage Limit
                  parameter either from the Web Console or by using the couchbase-cli xdcr-replicate
                  command.</entry>
              </row>
              <row>
                <entry><xref href="https://issues.couchbase.com/browse/MB-21879" format="html"
                    scope="external">MB-21879</xref></entry>
                <entry>Replication was stuck when some DCP streams were inactive for a long period
                  and resulted in a race condition when the server tried to restart the inactive DCP
                  streams.</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </p>
      <p outputclass="h3" id="support-platform"><b>New Supported Platforms</b></p>
      <p>This release adds support for the following platforms: <ul id="ul_rz4_mp3_qbb">
        <li>Ubuntu 16.04</li>
        <li>SUSE Linux 12</li>
        <li>Oracle Linux 7</li>
        <li>Microsoft Windows 2016</li>
      </ul>See <xref href="../install/install-platforms.dita#topic1634"/> for the complete list of
        supported platforms.</p>
      
      <p outputclass="h3" id="deprecated-items"><b>Deprecated Features and Platforms</b></p>
      <p>Starting this release, the following platforms are no longer supported: <ul
        id="ul_w3x_nw3_qbb">
        <li>Microsoft Windows 7</li>
        <li>Microsoft Windows 8</li>
        <li>Microsoft Windows 2008</li>
        <li>Amazon Linux 2014.03</li>
        <li>Ubuntu Linux 12.04</li>
        <li>Debian GNU/Linux 7</li>
        <li>Mac OS X 10.8, 10.9, 10.10</li>
      </ul>  See <xref href="../install/install-platforms.dita#topic1634"/> for the complete list
        of supported platforms.</p>
      <p>The following functionality is deprecated, will be deprecated or is unsupported.</p><p>
        <table frame="all" rowsep="1" colsep="1" id="table_bl3_533_1v">
          <tgroup cols="2">
            <colspec colname="c1" colnum="1" colwidth="1*"/>
            <colspec colname="c2" colnum="2" colwidth="3*"/>
            <thead>
              <row>
                <entry>Function</entry>
                <entry>Description</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry>CLI setting-ldap command</entry>
                <entry>This command is deprecated in this release. Use the admin-role-manage command
                  instead.</entry>
              </row>
              <row>
                <entry><codeph>BASE64()</codeph>
                </entry>
                <entry>The <codeph>BASE64()</codeph> function is deprecated since version 4.5; use
                  the function <codeph>BASE64_ENCODE()</codeph> instead. <p>Also, use the
                    <codeph>BASE64_DECODE()</codeph> function to reverse the encoding done by
                    <codeph>BASE64_ENCODE().</codeph></p></entry>
              </row>
              <row>
                <entry>Server-side moxi <xref
                  href="http://developer.couchbase.com/documentation/server/4.0/install/install-client-server.html"
                  format="html" scope="external">proxy</xref> is deprecated in Couchbase Server
                  and CLI</entry>
                <entry>Use Couchbase client SDKs or client-side moxi in your applications.</entry>
              </row>
              <row>
                <entry>CRAM-MD5 for bucket authentication</entry>
                <entry>Use SCRAM protocol supporting clients for bucket authentication starting
                  Couchbase Server version 4.5. </entry>
              </row>
              <row>
                <entry>Deprecate XDCR API from <filepath>/internalSettings</filepath> REST
                  endpoint in 4.5</entry>
                <entry><filepath>/Settings/replications</filepath> REST endpoint will be available
                  for all replication settings and provides the same functionality.</entry>
              </row>
              <row>
                <entry>N1QL: Deprecated the use of path-expressions in <codeph>FROM</codeph> and
                  <codeph>JOIN</codeph> clauses.</entry>
                <entry>FROM and JOIN clauses should use only keyspaces. Paths can be used for
                  expressions in other clauses, operators, projections, and so on.<p> For example:
                    <codeblock>SELECT count(*) FROM `travel-sample`.schedule; </codeblock> can be
                    rewritten as:
                    <codeblock>SELECT count(*)  FROM `travel-sample` WHERE schedule IS NOT MISSING;</codeblock></p></entry>
              </row>
              <row>
                <entry>CAPI based XDCR is deprecated.</entry>
                <entry>CAPI based XDCR is deprecated and will be removed in a future version of
                  Couchbase Server. <p>Note that the support for Elasticsearch Plugin has not been
                    removed. However, the Elasticsearch Plugin may be modified in the future to
                    use an alternative connection method such as DCP or XMEM XDCR (XDCR
                    v2).</p></entry>
              </row>
              <row>
                <entry>Couchbase Enterprise Backup and Restore tool</entry>
                <entry>The tools, <codeph>cbbackup</codeph> and <codeph>cbrestore</codeph>, are
                  deprecated from the Enterprise Edition. We recommend replacing these old tools
                  with the new enterprise backup and restore tool introduced in version 4.5, <xref
                    href="../backup-restore/cbbackupmgr.dita">cbbackupmgr</xref>.</entry>
              </row>
              <row>
                <entry>Standard Global Secondary Indexes</entry>
                <entry> A new high performance storage engine for GSI, Plasma, replaces the existing
                  GSI storage engine which is deprecated. </entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </p>
    </section>
  </body>
</topic>
