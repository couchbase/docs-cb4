<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_gbk_tyh_t5">
  <title>Release Notes</title>
  <body>
    <p>Couchbase Server 5.5.0 Beta is a significant update of the Couchbase Data Platform. This
      release specifically highlights agility, performance, and manageability and includes
      enhancements to existing services as well as new server and SDK components. Take a look at
        <xref href="../introduction/whats-new.dita#whats-new"/> for a list of new features and
      improvements that are available in this release.</p>
    <p>Couchbase Server 5.5.0 Beta was released in April 2018. </p>
    <note type="important">
      <p>This pre-release version of Couchbase Server 5.5 (Beta) is intended for development
        purposes only. Some features are still in development and may have some rough edges and
        bugs, and may change significantly before the final GA release. This pre-release version is
          <b>not supported</b> in production. </p>
      <p>The pre-release versions do <b>not support</b> upgrading from an earlier version of
        Couchbase Server.</p>
    </note>
    <section id="changes-in-behavior">
      <title>Major Behavior Changes</title>
      <table frame="all" rowsep="1" colsep="1" id="table_change-behavior">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28778" format="html"
                  scope="external">MB-28778</xref></entry>
              <entry>The default number of Data Service worker threads has been increased; from 3/4
                of the number of available CPU threads, to 7/8 of the number of available CPU
                threads (minimum of 4 in both cases). This makes better use of the available CPU
                resource, particularly on larger systems, as such users may see an increase in CPU
                utilization on such systems.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27173" format="html"
                  scope="external">MB-27173</xref></entry>
              <entry>
                <p>Prior to 5.5, the <cmdname>mctimings</cmdname> command defined the <i>request
                    start</i> as the time when the 24 byte request header had been read by the Data
                  Service. However, many requests contain a <i>body</i> which also needs to be read
                  before a request can be processed. As such, the reported duration didn't
                  accurately reflect how long the server actually spent processing a request, if it
                  was still waiting for the body to be received from the network.</p>
                <p>In 5.5, the definition of <i>request start</i> has been changed to be when the
                  header <i>and</i> body have both been read. This has the effect of more accurately
                  reflecting the time spent by the Data Service in servicing a request, as the time
                  the body spends in transit over the network is no longer included. As a result
                  command timings for affected request will have shorter durations compared to how
                  they were measured before 5.5.</p>
              </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27060" format="html"
                  scope="external">MB-27060</xref></entry>
              <entry>The Couchbase Server 5.5 Windows installer package no longer bundles the DLL
                  <filepath>dbghelp.dll</filepath> which is required by Breakpad to produce dumps on
                Windows platforms. Starting version 5.5, Breakpad will pick the DLL (dbghelp.dll)
                that is shipped with the OS. </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </section>
    <section id="v550-known-issues">
      <title>Known Issues</title>
      <p><b>Cross Data-center Replication (XDCR)</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-xdcr">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29209" format="html"
                  scope="external">MB-29209</xref>, <xref
                  href="https://issues.couchbase.com/browse/MB-29205" format="html" scope="external"
                  >MB-29205</xref>, <xref href="https://issues.couchbase.com/browse/MB-29113"
                  format="html" scope="external">MB-29113</xref>, <xref
                  href="https://issues.couchbase.com/browse/MB-29040" format="html" scope="external"
                  >MB-29040</xref></entry>
              <entry><b>Summary</b>: There are a number of open issues in Couchbase Server, which
                can cause rebalance to fail from time to time. These issues are being worked on and
                will be addressed for GA. <p><b>Workaround</b>: Rerun rebalance as the subsequent
                  rebalance operations succeed in most cases. </p></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27719" format="html"
                  scope="external">MB-27719</xref></entry>
              <entry><b>Summary</b>: The <cmdname>cbrecovery</cmdname> command throws an exception
                when recovering data from a cluster that has failed over nodes.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Administration/Cluster Management</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-cluster">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28417" format="html"
                  scope="external">MB-28417</xref></entry>
              <entry><b>Summary</b>: The permissions assigned to the cluster_admin role have been
                downgraded. As a result, The cluster_admin role no longer has FTS write permissions
                used to create FTS searches.<p><i>Workaround</i>: Add the <b>fts_admin</b> role as
                  required.</p></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-23074" format="html"
                  scope="external">MB-23074</xref></entry>
              <entry><b>Summary</b>: Performance issues may be observed when running Couchbase
                Server on CentOS 7.3 with kernel 3.10.0-514.6.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-17571" format="html"
                  scope="external">MB-17571</xref></entry>
              <entry><b>Summary:</b> On an undersized node, the default memory quota assigned to all
                the selected services by the server might result in a failure. <p><b>Workaround:</b>
                  Adjust the memory allocations appropriately to work around this issue.</p></entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Data Service</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-kv-data">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29227" format="html"
                  scope="external">MB-29227</xref></entry>
              <entry><b>Summary</b>: Couchbase Server can get into a livelock state due to high
                checkpoint memory usage. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28868" format="html"
                  scope="external">MB-28868</xref></entry>
              <entry><b>Summary</b>: The index service undergoes a race condition in the storage
                engine which leads to a crash. The crash is most likely to happen if the index
                service is restarted with existing build indexes and they continue to process
                mutations after the index service restarts.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Eventing Service</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-eventing">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29235" format="html"
                  scope="external">MB-29235</xref></entry>
              <entry><b>Summary</b>: Eventing does not retry bucket operation failures that are
                determined by the appropriate LCB macro to be retriable. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29147" format="html"
                  scope="external">MB-29147</xref></entry>
              <entry><b>Summary</b>: Rebalance of KV/Eventing nodes can hang if the cluster contains
                Eventing nodes due to stale authentication info with the GoCB SDK. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29076" format="html"
                  scope="external">MB-29076</xref></entry>
              <entry><b>Summary</b>: The signatures of docTimer and cronTimer functions are not
                consistent. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28968" format="html"
                  scope="external">MB-28968</xref></entry>
              <entry><b>Summary</b>: Rebalance of KV/Eventing nodes can hang if the cluster contains
                Eventing nodes. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28779" format="html"
                  scope="external">MB-28779</xref></entry>
              <entry><b>Summary</b>: If the handler code is not idempotent, there could be more docs
                on the destination bucket than expected post rebalance. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28775" format="html"
                  scope="external">MB-28775</xref></entry>
              <entry><b>Summary</b>: On Windows, there could be orphan processes with <filepath>.rbf
                </filepath>extension running even after uninstalling Couchbase Server.
                    <p><b>Workaround</b>: Kill all <filepath>eventing-consumer.exe</filepath>
                  processes before reinstalling Couchbase Server.</p></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28667" format="html"
                  scope="external">MB-28667</xref></entry>
              <entry><b>Summary</b>: In some circumstances, like function undergoing bootstrap or
                buckets referenced by the function (source, metadata, destination) get flushed or
                deleted, the function cannot be undeployed. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28550" format="html"
                  scope="external">MB-28550</xref></entry>
              <entry><b>Summary</b>: After restoring from a enterprise backup of eventing functions,
                eventing service will not process mutations in the destination cluster. </entry>
            </row>
            <!--<row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28520" format="html"
                scope="external">MB-28520</xref></entry>
              <entry><b>Summary</b>: Deployment fails if the size of the handler code is > 1MB.
              </entry>
            </row>-->
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28315" format="html"
                  scope="external">MB-28315</xref></entry>
              <entry><b>Summary</b>: Redeploying a function results in the application log being
                truncated instead of appending to the existing log.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27814" format="html"
                  scope="external">MB-27814</xref></entry>
              <entry><b>Summary</b>: When there are multiple functions being deployed, undeployment
                does not happen until all functions are deployed. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27679" format="html"
                  scope="external">MB-27679</xref></entry>
              <entry><b>Summary</b>: The Eventing service can crash when processing documents in
                source buckets with size &gt; 1 MB.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27559" format="html"
                  scope="external">MB-27559</xref></entry>
              <entry><b>Summary</b>: Benign panics can be seen in the eventing service logs during
                undeployment. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27491" format="html"
                  scope="external">MB-27491</xref></entry>
              <entry><b>Summary</b>: Failed rebalance, when retried, can hang. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27454" format="html"
                  scope="external">MB-27454</xref></entry>
              <entry><b>Summary</b>: Rebalance-in of a data(KV) node after recovery from failover
                may hang if eventing service is processing mutations. </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Full-text Search Service</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-fts">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29142" format="html"
                  scope="external">MB-29142</xref></entry>
              <entry><b>Summary</b>: </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28894" format="html"
                  scope="external">MB-28894</xref></entry>
              <entry><b>Summary</b>: </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28847" format="html"
                  scope="external">MB-28847</xref></entry>
              <entry><b>Summary</b>: The memory usage during index build overshoots the RAM
                quota.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28468" format="html"
                  scope="external">MB-28468</xref></entry>
              <entry><b>Summary</b>: The full-text search service repeatedly attempts to setup DCP
                streams to non-existing vBuckets.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-25714" format="html"
                  scope="external">MB-25714</xref></entry>
              <entry><b>Summary</b>: On Windows platform, a very high memory/CPU usage may be
                observed when search service is indexing.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Indexing Service</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-gsi-views">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28139" format="html"
                  scope="external">MB-28139</xref></entry>
              <entry><b>Summary</b>: If the index files are corrupted, the index service may
                continue to crash. <p><b>Workaround</b>: Failover the indexer node, or manually
                  delete the corrupt index files from the server.</p></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-19869" format="html"
                  scope="external">MB-19869</xref></entry>
              <entry><b>Summary</b>: Rebalance fails when taking out failed over nodes running
                views, in certain circumstances.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <!--<p>Query Service</p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-query">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry/>
              <entry/>
            </row>
          </tbody>
        </tgroup>
      </table>-->
      <!--<p>Security</p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-security">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody/>
        </tgroup>
      </table>-->
      <p><b>Tools</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-tools">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28337" format="html"
                  scope="external">MB-28337</xref></entry>
              <entry><b>Summary</b>: The <cmdname>cbworkloadgen</cmdname> utility fails to load
                large number of documents when IPv6 was enabled. </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <!--     <p>Web Console/UI</p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-ui">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody/>
        </tgroup>
      </table>-->
      <p><b>Analytics Service (Developer Preview)</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v55-analytics">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27280" format="html"
                  scope="external">MB-27280</xref></entry>
              <entry><p><b>Summary</b>: It is possible for a rebalance of the Analytics nodes to
                  always fail if:</p><ul id="ul_p4d_cwn_bdb">
                  <li>a bucket is in the disconnected state, and </li>
                  <li>the Analytics nodes are at different DCP states. </li>
                </ul>In that case a common DCP state (required for rebalancing) cannot be achieved
                as no new DCP mutations will be received by the Analytics nodes.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </section>
    <section id="v550-fixed-issues">
      <title>Fixed Issues</title>
      <p><b>Query Service</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_query_550">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-25901" format="html"
                  scope="external">MB-25901</xref></entry>
              <entry>Fixed an issue where the ORDER BY operator proceeded to sort even after being
                stopped and could lead to crashes. </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <!--      <p><b>UI/Web Console</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_webconsole_550">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry/>
              <entry/>
            </row>
          </tbody>
        </tgroup>
      </table>-->
    </section>
    <p outputclass="h3"><b>New Supported Platforms</b></p>
    <p>This release adds support for the following platforms: <ul id="ul_iyn_5ym_n2b">
        <li>Debian 9</li>
      </ul>See <xref href="../install/install-platforms.dita#topic1634"/> for the complete list of
      supported platforms.</p>
    <p outputclass="h3"><b>Deprecated Features and Platforms</b></p>
    <p>The following functionality is deprecated, will be deprecated, or is unsupported.</p>
    <ul id="ul_dhd_bzm_n2b">
      <li>Server side moxi or buckets with custom server side moxi ports are deprecated and may be
        removed from the product in the future.</li>
    </ul>
  </body>
</topic>
