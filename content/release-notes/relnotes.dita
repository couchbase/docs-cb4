<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_gbk_tyh_t5">
  <title>Release Notes</title>
  <body>
<<<<<<< HEAD
    <p>Couchbase Server 5.5.0 (Developer Build) is a significant update of the Couchbase Data
      Platform. This release specifically highlights agility, performance, and manageability and
      includes enhancements to existing services as well as new server and SDK components. Take a
      look at <xref href="../introduction/whats-new.dita#whats-new"/> for a list of new features and
      improvements that are available in this release.</p>
    <p>Couchbase Server 5.5.0 Developer Build was released in March 2018. </p>
    <note type="important">
      <p>This pre-release version of Couchbase Server 5.5 (Developer Build) is intended for
        development purposes only. Some features are still in development and may have some rough
        edges and bugs, and may change significantly before the final GA release. This pre-release
        version is <b>not supported</b> in production. </p>
      <p>The pre-release versions do <b>not support</b> upgrading from an earlier version of
        Couchbase Server.</p>
    </note>
    <section id="v550-known-issues"> <title>Known Issues</title>
=======
    <p>Couchbase Server 5.1.x fortifies the 5.x series to improve reliability, stability, and security of the product. Take a look at <xref href="../introduction/whats-new.dita">What's new</xref> for a list of new features and
      improvements that are available in the 5.1.x series.</p>
    
    <section id="release-511">
      <title>Release 5.1.1</title>
      <p>Couchbase Server 5.1.1 was released in June 2018. This is the first maintenance release in
        the 5.1.x series of Couchbase Server and includes important bug fixes applicable to all
        prior 5.x releases. We recommend that you upgrade to the 5.1.1 release and deploy these important bug fixes.</p>
      <p id="upgrading-to-511"><b>Upgrading to Version 5.1.1</b></p>
      <p>Since most Couchbase Server upgrade procedures involve rebalance,
        some care must be taken when upgrading from a version prior to 5.1.1 to avoid
        being affected by <xref href="https://issues.couchbase.com/browse/MB-29959"
          format="html" scope="external">MB-29959</xref>. Specifically, graceful failover
        and/or remove+rebalance should not be used to start this upgrade. As such, there
        are a few best practice approaches: <ol>
          <li>Add a net-new node of at least 5.1.1 to any existing cluster first. This new
            node will become the orchestrator and any further rebalance will not be
            affected. From then on, follow the instructions in <xref
              href="../install/upgrade-strategies.dita#topic_y23_jjv_xs/online-upgrade"
              >Performing an Online Upgrade</xref>. </li>
          <li>If a net-new node is not available, a hard failover can be performed on any node, that
            node upgraded to 5.1.1 and then re-added to the cluster. This is only required for the
            first node and, as per #1 above, any further rebalance operations will not be affected.
            From then on, follow the instructions in <xref
              href="../install/upgrade-strategies.dita#topic_y23_jjv_xs/online-upgrade">Performing
              an Online Upgrade</xref>.</li>
          <li>As XDCR is not affected by MB-29959, upgrading one cluster in a
            multi-cluster setup is also supported. Ensure that no writes are going to the
            cluster during its upgrade unless following the approaches listed in #1 or #2
            above. For instructions, see <xref
              href="../install/upgrade-strategies.dita#topic_y23_jjv_xs/intercluster"
              >Upgrade Using Inter-cluster Replication</xref>.</li>
          <li>Offline upgrade will not be affected. For instructions, see <xref
            href="../install/upgrade-strategies.dita#topic_y23_jjv_xs/offline"
            >Performing the Offline Upgrade</xref>.</li>
        </ol></p><p>Which method is best for your cluster will depend on your architecture
          and organization’s requirements (for example, SLAs, extra hardware/cluster
          availability, and so on). Once a cluster is upgraded to 5.1.1 or later, this
          guidance no longer applies and any supported upgrade method may be used going
          forward.</p>
      <p outputclass="h3" id="fixed-issues-511"><b>Fixed Issues</b></p>
      <p><b>Cross Datacenter Replication (XDCR)</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_xdcr_511">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29119" format="html"
                  scope="external">MB-29119</xref></entry>
              <entry>Fixed an issue where bidirectional XDCR across clusters was not working as
                expected.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Data Service</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_dataservice_511">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29959" format="html"
                  scope="external">MB-29959</xref></entry>
              <entry>During rebalance, it was observed that sometimes in-flight mutations did not
                persist correctly. We’ve fixed the issue in this release and recommend upgrading to
                get the fix. <p>For best approaches when upgrading, see <xref
                  href="#topic_gbk_tyh_t5/upgrading-to-511" format="dita">Upgrading to Version
                  5.1.1</xref>.</p></entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Index Service</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_index_511">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29327" format="html"
                  scope="external">MB-29327</xref></entry>
              <entry>Upon upgrading a single node cluster from 4.5.1 to 5.1.0, the ForestDB indexes
                are upgraded to Plasma. However, after performing a rebalance, the Index Storage
                Mode list on the Web Console Settings page incorrectly displays the "Legacy Global
                Secondary" option. </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <p><b>Query</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_query_511">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-29034" format="html"
                  scope="external">MB-29034</xref></entry>
              <entry>The activity of query nodes was affected after a data node failover due to
                network outage. The query nodes can take 2-5mins to recover. If you want the query
                nodes to recover earlier, you must update the query timeout parameter to less than
                the default 2 mins. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-28175" format="html"
                  scope="external">MB-28175</xref></entry>
              <entry>Fixed an issue where query nodes panic whenever the right side of LIKE clause
                was dependent on a field.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27815" format="html"
                scope="external">MB-27815</xref></entry>
              <entry>Fixed an issue where the array indexing plan incorrectly included filter covers.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      
    </section>
    
    <section id="release-510"><title>Release 5.1.0</title>
      <p>Couchbase Server 5.1.0 was released in February 2018. In addition to bug fixes, this release
        includes enhancements to certificate-based authentication and the
        <cmdname>cbbackupmgr</cmdname> utility. The following sections list the fixed issues, known
        issues, and deprecated items in this release. </p>
      <p><b>Major Changes from Version 5.0</b></p>
      <ul id="ul_ibr_vbs_ycb">
        <li>Support for Debian 9 has been added.</li>
        <li>Certificate-based authentication now supports multiple prefixes.</li>
      </ul>
    
    <p id="v510-known-issues"> <b>Known Issues</b> </p>
>>>>>>> c7443d5f71bf0e8a417bea07fe197cb6ec986237
      <table frame="all" rowsep="1" colsep="1" id="table_knownissues_v510">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
<<<<<<< HEAD
              <entry><xref href="https://issues.couchbase.com/browse/MB-28453" format="html"
                  scope="external">MB-28453</xref></entry>
              <entry><b>Summary</b>:  Eventing service uses a feature in Memcached which is known to
                have a race condition that may cause Memcached to restart. </entry>
=======
              <entry><xref href="https://issues.couchbase.com/browse/MB-27688" format="html"
                scope="external">MB-27688</xref></entry>
              <entry>The query service does not support http/2 protocol. Consequently, if you want
                to use CURL, you must pass "<codeph>--http1.1</codeph>" as one of the parameters
                when using CURL to execute the query via the REST API. </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      
    <p id="v510-fixed-issues"> <b>Fixed Issues</b> </p>
      
      <p><b>Cross Datacenter Replication (XDCR)</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_xdcr_510">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27850" format="html"
                scope="external">MB-27850</xref></entry>
              <entry>Whenever simultaneous replications were set up using XDCR, it was observed that data was not replicated via the second replication stream. This was basically due to rules enforced to manage the execution of simultaneous mutations to the document.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-25878" format="html"
                scope="external">MB-25878</xref></entry>
              <entry>When the source node was upgraded in a unidirectional replication from 4.1 to 5.x, the GoGC global setting was set to 0 instead of a higher number.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      
      <p><b>Data Service</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_data_510">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26126" format="html"
                scope="external">MB-26126</xref></entry>
              <entry>Statistics for non-resident documents could be incorrect when operating on
                documents which contained system XATTRs.<p>When using Couchbase Server 5.0 with Sync
                  Gateway 1.5+ and the Mobile Convergence feature was enabled in Sync Gateway
                  (enable_extended_attributes), the count of documents which are not resident could
                  be under-reported in the UI. </p></entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26037" format="html"
                scope="external">MB-26037</xref></entry>
              <entry>Rebalance failed initially if the destination node for a vBucket required a
                rollback. <p>During a rebalance, if the destination node for a particular vBucket
                  already had a previous, outdated version of that vBucket then the rebalance failed
                  initially.</p></entry>
>>>>>>> c7443d5f71bf0e8a417bea07fe197cb6ec986237
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-27280" format="html"
                scope="external">MB-27280</xref></entry>
              <entry><p><b>Summary</b>: It is possible for a rebalance of the Analytics nodes to
                  always fail if:</p><ul id="ul_p4d_cwn_bdb">
                  <li>a bucket is in the disconnected state, and </li>
                  <li>the Analytics nodes are at different DCP states. </li>
                </ul>In that case a common DCP state (required for rebalancing) cannot be achieved
                as no new DCP mutations will be received by the Analytics nodes.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26478" format="html"
                scope="external">MB-26478</xref></entry>
              <entry><b>Summary</b>:  On Windows, a system limitation with the Analytics statistics
                may cause “system load” to have a negative value. Additionally, on Windows and mac
                OS, the statistics for “bytes read/sec” and “bytes written/sec” are not reported and
                always show zero.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26065" format="html"
                scope="external">MB-26065</xref></entry>
              <entry><b>Summary</b>:  Rebalance exits with reason
                  "<systemoutput>janitor_agent_servant_died</systemoutput>". This was observed when
                the client connection was re-established, causing the RBAC privileges to be
                reloaded. </entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-23074" format="html"
                scope="external">MB-23074</xref></entry>
              <entry><b>Summary</b>: Performance issues may be observed when running Couchbase
                Server on CentOS 7.3 with kernel 3.10.0-514.6.</entry>
            </row>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-17571" format="html"
                scope="external">MB-17571</xref></entry>
              <entry><b>Summary:</b> On an undersized node, the default memory quota assigned to all the selected services by the server might result in a failure. <p><b>Workaround:</b> Adjust the memory allocations appropriately to work around this issue.</p></entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      
    </section>
    <section id="v550-fixed-issues"> <title>Fixed Issues</title>
      
      <p><b>Web Console</b></p>
      <table frame="all" rowsep="1" colsep="1" id="table_fixedissues_webconsole_510">
        <tgroup cols="2">
          <colspec colname="c1" colnum="1" colwidth="1*"/>
          <colspec colname="c2" colnum="2" colwidth="2.64*"/>
          <thead>
            <row>
              <entry>Issue</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><xref href="https://issues.couchbase.com/browse/MB-26418" format="html"
                scope="external">MB-26418</xref></entry>
              <entry>With failed EXPLAIN queries, the error was not being checked before trying to render non-existent the query plan, causing a UI hang. </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </section>
      
  </body>
  

</topic>
