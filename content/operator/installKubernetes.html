<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Couchbase Documentation</title>
    <link rel="stylesheet" href="../../_/css/site.css">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="shortcut icon" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" sizes="57x57" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/webfiles/1498186094252/images/icons/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/favicon-16x16.png">
<link rel="manifest" href="https://developer.couchbase.com/webfiles/1498186094252/images/icons/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/webfiles/1498186094252/images/icons/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!--    _____________________________
_______/ Support for legacy browsers \_______________________________________-->
<!--[if lte IE 8]>
<script type="text/javascript" charset="utf-8" src="/webfiles/1498186094252/js/thirdparty/vendor/html5shiv.js" />
<script type="text/javascript" charset="utf-8" src="/webfiles/1498186094252/js/thirdparty/vendor/respond.js" />
<![endif]-->
<!--[if IE 9]>
<script type="text/javascript" charset="utf-8" src="/webfiles/1498186094252/js/thirdparty/classList.js" />
<![endif]-->
<!--_________________________________________________________________________-->
<script type="text/javascript" charset="utf-8" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/jquery-migrate.js"></script>
<script type="text/javascript" charset="utf-8" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/slick.js"></script>
<script type="text/javascript" charset="utf-8" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/isotope.min.js"></script>
<script type="text/javascript" charset="utf-8" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/imagesloaded.min.js"></script>

<meta name="apple-mobile-web-app-title" content="Couchbase">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="google-site-verification" content="1gPO0RaMzKyZJFpS-iyIEnPsWDztwZH0R3vG1VpSwvM" />

<!-- LOCAL CSS Libs -->
<link rel="stylesheet" href="https://developer.couchbase.com/webfiles/1498186094252/css/styles.css">

<!-- Default canonical comes from the URL -->
<link rel="canonical" href="http://developer.couchbase.com"/>
<title>Couchbase</title>
<link rel="stylesheet" href="https://developer.couchbase.com/binaries/content/assets/css/overrides.css">
  </head>
  <body style="padding: 0 !important;">
<!-- Google Tag Manager -->
<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0"
          width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager -->
<script>
  var overrideJsPath = "/binaries/content/assets/js/overrides.js";
  $.ajax({
    url: overrideJsPath,
    type: 'HEAD',
    error: function () {
    },
    success: function () {
      // file exists
      $.getScript(overrideJsPath);
    }
  });
</script>
<!--    ________________
_______/ INCLUDE HEADER - BODY - FOOTER \____________________________________________________-->
<!-- begin - include ref= -->
<nav class="aux">
  <div>
  </div>
</nav>
<!-- Beginning of site.../jsp/base/header.jsp -->
<header id="global-header" class="global-header dev-portal">
  <div class="layout-wrapper">
    <div class="global-header__logo">
      <a href='http://www.couchbase.com'>Couchbase</a>
      <a href='index.html'>Developer</a>

    </div>

    <a data-modules="navigation,globalheadersearch"></a>
    <nav role="navigation" id="primary-navigation" class="primary-navigation">
      <button aria-controls="primary-navigation__wrapper"
              aria-pressed="false"
              class="primary-navigation__toggler"
              type="button">

        <span>Menu</span>
      </button>
      <div id="primary-navigation__wrapper"
           class="primary-navigation__wrapper"
           aria-expanded="false">

        <ul class="primary-navigation__items">
          <li class="primary-navigation__item ">

            <a href="https://developer.couchbase.com/documentation/server/current/introduction/intro.html">Server</a>
          </li>
          <li class="primary-navigation__item ">

            <a href="https://developer.couchbase.com/mobile">Mobile</a>
          </li>
          <li class="primary-navigation__item has-secondary-navigation">

            <a href="https://developer.couchbase.com/community">Community</a>
            <div class="secondary-navigation">
              <ul class="secondary-navigation__items">
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/open-source-projects">Open Source Projects</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/contribute">Contribute</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="http://www.couchbase.com/nosql-resources/events">Events</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/experts-and-champions">Experts &amp; Champions</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="http://forums.couchbase.com/">Forums</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="http://blog.couchbase.com">Blogs</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/support">Support</a>
                </li>
              </ul>
            </div>
          </li>
          <li class="primary-navigation__item has-secondary-navigation">

            <a href="https://developer.couchbase.com/guides-and-references">Site Map</a>
            <div class="secondary-navigation">
              <ul class="secondary-navigation__items">
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/guides-and-references#section-1">Couchbase Server</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/guides-and-references#section-2">Couchbase Mobile</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/guides-and-references#subsection-1-3">SDKs</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/guides-and-references#subsection-1-5">Connectors</a>
                </li>
                <li class="secondary-navigation__item">
                  <a href="https://developer.couchbase.com/documentation-archive">Documentation Archive</a>
                </li>
              </ul>
            </div>
          </li>
        </ul>
        <form id="global-header-search"
              autocomplete="off"
              class="global-header-search global-header-search--js"
              action="https://developer.couchbase.com/search"
              aria-expanded="false">
          <ul><!--
            ---><li>
            <label for="global-header-search__query">
              Search query
            </label>
            <input
              type="search"
              placeholder="Search"
              name="q"
              value=""
              id="global-header-search__query">
          </li><!--
                ---><li>
            <button type="submit">
              <span>Search</span>
            </button>
          </li><!--
        ---></ul>
          <button aria-controls="global-header-search__items"
                  aria-pressed="false"
                  class="global-header-search__toggler"
                  type="button">
            <span>Search</span>
          </button><!--
        --->

          <div style="display: none" about="custom-search-fields">

            <input type="hidden"
                   name="cx"
                   value="017928787631531434501:3e7lwhjxsom" />
            <input type="hidden"
                   name="cof"
                   value="FORID:11" />
            <input type="hidden"
                   name="safe"
                   value="off" />
            <input type="hidden"
                   name="form_build_id"
                   value="form-RrbKDUhO3kB2MiqBdZHIQI9L4LFE7c3L_s87N2B9BZo" />
            <input type="hidden"
                   name="form_id"
                   value="google_cse_results_searchbox_form" />
            <input type="hidden"
                   name="siteurl"
                   value='developer.couchbase.com' />

          </div>
        </form>
      </div>
    </nav>
    <a class="global-header__download-button" href="https://developer.couchbase.com/downloads">
      Download
    </a>
  </div>
</header>
<div class="main-wrapper">
<div class="navigation-container">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <span class="nav-text"></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Couchbase Operator User&#8217;s Guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="prerequisiteAndSetup.html">Prerequisites and Setup</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="installKubernetes.html">Kubernetes Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="installKubernetesNoRBAC.html">Kubernetes Setup (RBAC Disabled)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="installOpenShift.html">OpenShift Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="operatorConfig.html">Couchbase Operator Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="deployingCouchbase.html">Deploying a Couchbase Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="couchbaseClusterConfig.html">CouchbaseCluster Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="clusterStatusGuide.html">Displaying the Status of a CouchbaseCluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="listAndDescribe.html">Viewing the Pods/Services Created</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cbopctl.html">Ensuring Valid CouchbaseCluster Configurations With cbopctl</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="accessingCouchbase.html">Accessing Couchbase</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="adminConsoleAccess.html">Using the Couchbase Web Console</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="couchbaseCliGuide.html">Using the Couchbase CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="couchbaseClients.html">Using Couchbase Clients</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="runningCouchbase.html">Running Couchbase on Kubernetes or OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="scalingCouchbase.html">Scaling a CouchbaseCluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="nodeRecovery.html">Recovering from a Node Failure</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="updatingCouchbase.html">Updating a CouchbaseCluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deleteCouchbaseCluster.html">Deleting a CouchbaseCluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="logsTroubleshooting.html">Logs and Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="conditionsAndEvents.html">Conditions and Events</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="demo.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="releaseNotes.html">v0.8 Beta Release Notes</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="current">
    <span class="title">Couchbase Operator User&#x27;s Guide</span>
    <span class="version">0.8</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Couchbase Operator User's Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../beta/overview.html">beta</a>
        </li>
        <li class="version is-current">
          <a href="overview.html">0.8</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Home</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../home/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation" style="display: none;">
  <button class="navigation-toggle"></button>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb">Couchbase Operator User&#8217;s Guide</li>
    <li class="crumb"><a href="prerequisiteAndSetup.html">Prerequisites and Setup</a></li>
    <li class="crumb"><a href="installKubernetes.html">Kubernetes Setup</a></li>
  </ul>
</nav>
</div>
    <div class="body">
      <style>
        .doc h1 > a.anchor,
        .doc h2 > a.anchor,
        .doc h3 > a.anchor,
        .doc h4 > a.anchor,
        .doc h5 > a.anchor,
        .doc h6 > a.anchor {
          position: absolute;
          text-decoration: none;
          width: 1.75ex;
          margin-left: -1.5ex;
          visibility: hidden;
          font-size: 0.8em;
        }

        .doc h1 > a.anchor::before,
        .doc h2 > a.anchor::before,
        .doc h3 > a.anchor::before,
        .doc h4 > a.anchor::before,
        .doc h5 > a.anchor::before,
        .doc h6 > a.anchor::before {
          content: "\00a7";
        }

        .doc h1:hover > a.anchor,
        .doc h2:hover > a.anchor,
        .doc h3:hover > a.anchor,
        .doc h4:hover > a.anchor,
        .doc h5:hover > a.anchor,
        .doc h6:hover > a.anchor {
          visibility: visible;
        }
      </style>

<article class="doc">
<div class="sect1">
<h2 id="installing-on-kubernetes-with-rbac"><a class="anchor" href="#installing-on-kubernetes-with-rbac"></a>Installing on Kubernetes With RBAC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this setup guide we will walk through the recommended procedure for
setting up the Couchbase Operator in a Kubernetes cluster that has RBAC
enabled. This guide assumes that you are installing on a new Kubernetes
cluster, but if you have an existing system and need to do a custom
setup, then you should be able to modify a few of the parameters in the
various commands and configuration files in order to install the
Couchbase Operator.</p>
</div>
<div class="sect2">
<h3 id="creating-a-clusterrole"><a class="anchor" href="#creating-a-clusterrole"></a>Creating a ClusterRole</h3>
<div class="paragraph">
<p>The first step for installing the Couchbase Operator is to create a
<em>ClusterRole</em> that allows the Operator to access the resources it needs
to run. Since the Couchbase Operator might run in many different
namespaces, it is best to create a ClusterRole because you can assign
that role to a <em>ServiceAccount</em> in any namespace.</p>
</div>
<div class="paragraph">
<p>To create the ClusterRole for the Couchbase Operator, run the following
command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kubectl create -f https://packages.couchbase.com/kubernetes/0.8.1-beta2/k8s-rbac/cluster-role.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Note</em>: This role only needs to be created once.</p>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-serviceaccount"><a class="anchor" href="#creating-a-serviceaccount"></a>Creating a ServiceAccount</h3>
<div class="paragraph">
<p>After the ClusterRole is created, you need to create a ServiceAccount in
the namespace where you are installing the Couchbase Operator, and then
assign the ClusterRole to that ServiceAccount using a
<em>ClusterRoleBinding</em>. In this guide we will use the <code>default</code> namespace
to create the ServiceAccount.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kubectl create serviceaccount couchbase-operator --namespace default
$ kubectl create clusterrolebinding couchbase-operator --clusterrole couchbase-operator --serviceaccount default:couchbase-operator</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Note</em>: If you would prefer to use a <em>RoleBinding</em> instead of a
ClusterRoleBinding, then the CRD needs to be installed separately from
the Couchbase Operator. This can be accomplished by removing the
<code>-create-crd argument</code> from the <code>operator.yaml</code> file and uploading the
CouchbaseCluster CRD separately.</p>
</div>
</div>
<div class="sect2">
<h3 id="starting-the-operator"><a class="anchor" href="#starting-the-operator"></a>Starting the Operator</h3>
<div class="paragraph">
<p>Now that the ServiceAccount is set up with the appropriate permissions,
you can start the Couchbase Operator by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kubectl create -f https://packages.couchbase.com/kubernetes/0.8.1-beta2/k8s-rbac/operator.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running this command downloads the Couchbase Operator Docker image that
is specified in the <code>operator.yaml</code> file and creates a <em>deployment</em>
which manages a single instance of the Couchbase Operator. The Couchbase
Operator uses a deployment so that it can restart if the pod it’s
running in dies.</p>
</div>
<div class="paragraph">
<p>After you run the <code>kubectl create</code> command, it generally takes less than
1 minute for Kubernetes to deploy the Operator and for the Operator to
be ready to run. Using the following commands, you can check the status
of the Operator and see the status of your deployment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kubectl get deployments -l app=couchbase-operator</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you run this command immediately after the operator is deployed, the
output will look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
couchbase-operator   1         1         1            0           10s</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the deployment is called <code>couchbase-operator</code>. The DESIRED
field in the output shows that this deployment will create 1 pod running
the Couchbase Operator. The CURRENT field shows that 1 Couchbase
Operator pod has been created. However, the AVAILABLE field indicates
that that pod is not ready yet since its value is 0 and not 1. This
means that the Operator is still establishing a connection to the
Kubernetes master node to allow it to get updates on CouchbaseCluster
objects. Once the Operator has completed this task it will be able to
start managing Couchbase clusters and the status will be shown as
AVAILABLE.</p>
</div>
<div class="paragraph">
<p>You should continue to poll the status of the Operator until your output
looks similar to the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
couchbase-operator   1         1         1            1           47s</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also verify that the Couchbase Operator has come up successfully
using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get pods -l app=couchbase-operator</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the Couchbase Operator is up and running successfully, the command
returns an output where the READY field shows 1/1, such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                                  READY   STATUS   RESTARTS   AGE
couchbase-operator-1917615544-t5mhp   1/1     Running  0          57s</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also check the logs to confirm that the Couchbase Operator is up
and running. Look for the message:
<code>CRD initialized, listening for events&#8230;&#8203; module=controller</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kubectl logs couchbase-operator-1917615544-t5mhp
time="2018-04-25T03:01:56Z" level=info msg="Obtaining resource lock" module=main
time="2018-04-25T03:01:56Z" level=info msg="Starting event recorder" module=main
time="2018-04-25T03:01:56Z" level=info msg="Attempting to be elected the couchbase-operator leader" module=main
time="2018-04-25T03:02:13Z" level=info msg="I'm the leader, attempt to start the operator" module=main
time="2018-04-25T03:02:13Z" level=info msg="Creating the couchbase-operator controller" module=main
time="2018-04-25T03:02:13Z" level=info msg="Event(v1.ObjectReference{Kind:\"Endpoints\", Namespace:\"default\", Name:\"couchbase-operator\", UID:\"9b86c750-47e7-11e8-866e-080027b2a68d\", APIVersion:\"v1\", ResourceVersion:\"23482\", FieldPath:\"\"}): type: 'Normal' reason: 'LeaderElection' couchbase-operator-75ddfdbdb5-bz7ng became leader" module=event_recorder
time="2018-04-25T03:02:13Z" level=info msg="CRD initialized, listening for events..." module=controller
time="2018-04-25T03:02:13Z" level=info msg="starting couchbaseclusters controller"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="uninstall"><a class="anchor" href="#uninstall"></a>Uninstall</h3>
<div class="paragraph">
<p>Uninstalling the Couchbase Operator is a two-step process.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Delete the Couchbase Operator</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kubectl delete deployment couchbase-operator</code></pre>
</div>
</div>
</li>
<li>
<p>Delete the CRD</p>
<div class="paragraph">
<p>Make sure all instances of the Couchbase Operator have been deleted from
the Kubernetes cluster before you delete the CRD. Once all instances of
the Couchbase Operator have been deleted, run the following command to
delete the CRD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kubectl delete crd couchbaseclusters.couchbase.database.couchbase.com</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</article>
      <script>
        /* From https://stackoverflow.com/questions/18294759/use-javascript-to-add-a-css-class-to-all-elements-with-another-class-name */
        window.onload = function() {
          var buttons = document.querySelectorAll(".body .anchor"),
            len = buttons !== null ? buttons.length : 0,
            i = 0;
          for(i; i < len; i++) {
            buttons[i].className += " instructions";
          }
        }
      </script>
      <script>
        /* Inline script to remove the h1 heading when the page is rendered on the dev portal.
           Important otherwise it is displayed twice. */
        if (window.location.host === 'www.couchbaseinc.acct.us.onehippo.com' || window.location.host === 'developer.couchbase.com') {
          var heading = document.querySelector('div.body h1');
          heading.style.display = 'none';
        }
      </script>
      <script>
        /* Script to remove leading whitespace in code snippets.
         * Fix found on StackOverflow: https://stackoverflow.com/a/26230865/1908348 */
        [].forEach.call(document.querySelectorAll('code'), function($code) {
          var lines = $code.textContent.split('\n');
          if (lines[0] === '') {
            lines.shift()
          }

          var matches;
          var indentation = (matches = /^[\s\t]+/.exec(lines[0])) !== null ? matches[0] : null;
          if (!!indentation) {
            lines = lines.map(function(line) {
              line = line.replace(indentation, '')
              return line.replace(/\t/g, '    ')
            });

            $code.textContent = lines.join('\n').trim();
          }
        });
      </script>
    </div>
  </main>
</div>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>

<!-- Require_js bootstrap for app-specific JS module support -->
<!-- data-main attribute tells require.js to load
scripts/main.js after require.js loads. -->
<script type="text/javascript" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/require.js"></script>
<script type="text/javascript" src="https://developer.couchbase.com/webfiles/1498186094252/js/thirdparty/vendor/prism.js"></script>
<script rel="main" type="text/javascript" src="https://developer.couchbase.com/webfiles/1498186094252/js/main.js" ></script>
<!-- leave the main attribute, it is used to help main.js determine -->
<!-- the domain-relative path to the base script (main.js) -->  </body>
</html>
