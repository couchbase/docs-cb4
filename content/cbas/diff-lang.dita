<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_orh_32m_sx">
  <title>Appendix B: Differences in Query Languages</title>
  <body>
    <section id="n1ql-sql-diff">
      <title>Differences between N1QL and SQL++ languages</title>
    </section>
    <p></p>
    <p>
      <table id="table_ovv_y2m_sx">
        <tgroup cols="3">
          <colspec colnum="1" colname="col1"/>
          <colspec colnum="2" colname="col2"/>
          <colspec colnum="3" colname="col3"/>
          <tbody>
            <row>
              <entry dir="ltr">Operator</entry>
              <entry dir="ltr">SQL++</entry>
              <entry dir="ltr">N1QL</entry>
            </row>
            <row>
              <entry>
                <p dir="ltr">USE KEYS, ON KEYS</p>
              </entry>
              <entry>
                <p dir="ltr">SELECT * FROM default_shadow s</p>
                <p dir="ltr">WHERE meta().id IN [“1”, “2”, “3”];</p>
              </entry>
              <entry>
                <p dir="ltr">SELECT * FROM default_shadow s</p>
                <p dir="ltr">WHERE USE KEYS [“1”, “2”, “3”];</p>
              </entry>
            </row>
            <row>
              <entry>
                <p dir="ltr">IS VALUED</p>
              </entry>
              <entry dir="ltr">SELECT feature_name FROM default_shadow WHERE coverage_tests.P0 IS
                NOT UNKNOWN ORDER BY feature_name</entry>
              <entry dir="ltr">SELECT feature_name FROM default_shadow WHERE coverage_tests.P0 IS
                VALUED ORDER BY feature_name</entry>
            </row>
            <row>
              <entry>
                <p dir="ltr">DISTINCT Aggregate</p>
              </entry>
              <entry dir="ltr">SELECT job_title, (SELECT VALUE ds.name FROM default_shadow ds
                GROUP BY ds.name) AS names FROM default_shadow GROUP BY job_titile</entry>
              <entry>
                <p dir="ltr">SELECT job_title, array_agg(DISTINCT name) AS names FROM
                  default_shadow GROUP BY job_title</p>
              </entry>
            </row>
            <row>
              <entry>
                <p dir="ltr">ARRAY</p>
              </entry>
              <entry dir="ltr">SELECT (SELECT VALUE vm.memory FROM VMs AS vm) AS vm_memories FROM
                default_shadow WHERE VMs IS NOT NULL</entry>
              <entry dir="ltr">SELECT ARRAY vm.memory FOR vm IN VMs END AS vm_memories FROM
                default_shadow WHERE VMs IS NOT NULL </entry>
            </row>
            <row>
              <entry>
                <p dir="ltr">ARRAY FIRST</p>
              </entry>
              <entry>
                <p dir="ltr">SELECT name, VMs[0].os AS os FROM default_shadow;</p>
              </entry>
              <entry dir="ltr">SELECT name, FIRST vm.os FOR vm IN VMs END AS os FROM
                default_shadow;</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </p> 
    <section id="sql-diff">
      <title>Differences from SQL language</title>
    </section>
    <p>
      <table frame="all" rowsep="1" colsep="1" id="table_gjy_ygm_sx">
        <tgroup cols="3">
          <colspec colname="c1" colnum="1" colwidth="1.0*"/>
          <colspec colname="c2" colnum="2" colwidth="1.0*"/>
          <colspec colname="c3" colnum="3" colwidth="1.0*"/>
          <tbody>
            <row>
              <entry dir="ltr">Operator</entry>
              <entry dir="ltr">SQL++ / N1QL</entry>
              <entry dir="ltr">SQL</entry>
            </row>
            <row>
              <entry dir="ltr">IN</entry>
              <entry dir="ltr"> IN [1, 2, 3]</entry>
              <entry dir="ltr">IN (1, 2, 3)</entry>
            </row>
            <row>
              <entry>
                <p dir="ltr">DISTINCT Aggregate</p>
              </entry>
              <entry dir="ltr">SELECT job_title, (SELECT VALUE ds.name FROM default_shadow ds GROUP
                BY ds.name) AS names FROM default_shadow GROUP BY job_titile</entry>
              <entry>
                <p dir="ltr">SELECT job_title, array_agg(DISTINCT name) AS names FROM default_shadow
                  GROUP BY job_title</p>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </p>
     </body>
</topic>
