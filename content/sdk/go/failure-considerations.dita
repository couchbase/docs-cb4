<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_wxg_cwb_mv" >
    
    <title>
        Failure Considerations for the Go SDK in Couchbase
    </title>
    
    <titlealts>
        <navtitle>
            Failure Considerations
        </navtitle>
    </titlealts>
    
    <shortdesc conref="../shared/env-errors.dita#env_errors/shortdesc"/>
    
    <body>
        
        <section conref="../shared/env-errors.dita#env_errors/failover_definition">
        </section>
        
        <section conref="../shared/env-errors.dita#env_errors/what_to_expect_in_application">
        </section>
        
        <section conref="../shared/env-errors.dita#env_errors/what_to_expect_during_failover">
        </section>
        
        <section conref="../shared/env-errors.dita#env_errors/missing-nodes">
        </section>
        
        <section conref="../shared/env-errors.dita#env_errors/timeouts">
        </section>
        
        <section conref="../shared/env-errors.dita#env_errors/network_failures">
        </section>
        
        <section id="devguide-replica-read">
            <title>
                Reading from replicas
            </title>
            
            <p>
                High-availability applications can read documents from replicas, exchanging
                consistency for availability.
            </p>
            
            <p>
                If your bucket is configured for replication, then multiple replicas of each item
                exist within the cluster. By default the client will attempt to access an item using
                its computed master or active node. This returns the current and authoritative
                version of the item as it is stored within Couchbase.
            </p>
            
            <p>
                In conditions where access to the active node is unavailable (for example, it is
                disconnected from the network), an application may be able to access a replica
                version of the item using the <i>get-from-replica</i> operation which queries a
                replica node for a copy of the item. 
                
                <note>The item received from a replica node may
                    be an older version. It is possible a newer version exists in the active node,
                    but did not manage to get replicated before the active node went
                    offline.
                </note>
            </p>
            
            <codeblock outputclass="language-go">var value interface
cas, err := bucket.Get("key", &amp;value)
if err != nil {
    cas, err = bucket.GetReplica("key", &amp;value, 0)
}</codeblock>
            <p>
                If the third parameter to <apiname>GetReplica</apiname> is greater than zero then only
                that specific replica will be queried. Otherwise, a request will be sent to all replicas.
                Once the SDK receives a successful response from a replica then it will attempt to cancel
                all other requests and, once all requests are cancelled, assign the value from the successful
                response. If no successful response is received then an <apiname>ErrNoReplicas</apiname>
                error will be returned. As the value is assigned from the first successful response this means
                that only one value will be assigned to the value pointer.
            </p>
            

        </section>
    </body>
</topic>

