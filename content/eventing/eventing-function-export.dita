<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="eventing_function_export">
  
  <title>
    Function Export
  </title>
  
  <shortdesc> Couchbase provides an option to export Functions as a JSON document. Using the export
    and import options, you can port defined Functions from your Test-to-Test, Test-to-Production,
    or Production-to-Production environments.</shortdesc>
  
  <body>
    <section id="section_bsf_3yy_m2b">
      <title/>
      <p dir="ltr">To export a Function:</p>
      <ol id="ol_vqy_myy_m2b">
        <li>From the Couchbase Web Console > <b>Eventing</b> page.</li>
        <li>Select a Function to export. Click on the Function to view additional controls.</li>
        <li>Click <b>Export</b>. The Function definition gets exported to your system.<p/>A sample
          exported file for the enrich_ip_nums function demonstrated in <xref
            href="eventing-examples.dita#eventing_examples/section_jm1_1sy_m2b">Example 1</xref> is
          shown below. Ensure that you refrain from editing an exported file before importing the
          file back to the Couchbase cluster.</li>
      </ol>
      <table id="table_wqy_myy_m2b">
        <tgroup cols="1">
          <colspec colnum="1" colname="col1"/>
          <tbody>
            <row>
              <entry>
                <p dir="ltr">[</p>
                <p dir="ltr"> {</p>
                <p dir="ltr">"appcode": "function OnUpdate(doc, meta) {\n log('document', doc);\n
                  doc[\"ip_num_start\"] = get_numip_first_3_octets(doc[\"ip_start\"]);\n
                  doc[\"ip_num_end\"] = get_numip_first_3_octets(doc[\"ip_end\"]);\n
                  tgt[meta.id]=doc;\n}\n\nfunction get_numip_first_3_octets(ip)\n{\n var return_val
                  = 0;\n if (ip)\n {\n var parts = ip.split('.');\n\n //IP Number = A x
                  (256*256*256) + B x (256*256) + C x 256 + D \nreturn_val =
                  (parts[0]*(256*256*256)) + (parts[1]*(256*256)) + (parts[2]*256) +
                  parseInt(parts[3]);\nreturn return_val;\n }\n}\n",</p>
                <p dir="ltr">"depcfg": {</p>
                <p dir="ltr"> "buckets": [</p>
                <p dir="ltr"> {</p>
                <p dir="ltr"> "alias": "tgt",</p>
                <p dir="ltr"> "bucket_name": "source"</p>
                <p dir="ltr"> }</p>
                <p dir="ltr"> ],</p>
                <p dir="ltr"> "metadata_bucket": "metadata",</p>
                <p dir="ltr"> "source_bucket": "source"</p>
                <p dir="ltr">},</p>
                <p dir="ltr">"version": "evt-5.5.0-2938-ee",</p>
                <p dir="ltr">"handleruuid": 1014383070,</p>
                <p dir="ltr">"id": 0,</p>
                <p dir="ltr">"appname": "enrich_ip_nums",</p>
                <p dir="ltr">"settings": {</p>
                <p dir="ltr"> "cleanup_timers": false,</p>
                <p dir="ltr"> "dcp_stream_boundary": "everything",</p>
                <p dir="ltr"> "deadline_timeout": 3,</p>
                <p dir="ltr"> "deployment_status": true,</p>
                <p dir="ltr"> "description": "Enrich",</p>
                <p dir="ltr"> "execution_timeout": 1,</p>
                <p dir="ltr"> "log_level": "INFO",</p>
                <p dir="ltr"> "processing_status": true,</p>
                <p dir="ltr"> "user_prefix": "eventing",</p>
                <p dir="ltr"> "using_doc_timer": false,</p>
                <p dir="ltr"> "worker_count": 3</p>
                <p dir="ltr">},</p>
                <p dir="ltr">"using_doc_timer": false</p>
                <p dir="ltr"> }</p>
                <p dir="ltr">]</p>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </section>
  </body>
</topic>
