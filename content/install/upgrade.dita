<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_g3h_r2q_fw">
  <title>Upgrading Couchbase Server</title> <shortdesc>Periodically upgrading Couchbase Server helps maintain a properly functioning cluster and offers new features. Upgrading is a relatively simple process that usually incurs zero downtime.</shortdesc>
  <body>
    <p>Upgrading Couchbase Server regularly is vital to keep your cluster running well. New releases of Couchbase Server provide both bug fixes and new features. For each release, read the release notes to ascertain if there are bugs that might affect a running cluster or features that might be beneficial.</p>
    <p>For an overview of the new features in Couchbase Server version 4.5, check out the <xref
        href="../release-notes/relnotes.dita#topic_gbk_tyh_t5">release notes.</xref></p>
    <section><title>When to do an Upgrade</title>
      <p>If you can, it is best to upgrade during off hours. Avoid upgrading during the system’s peak usage times. 
        Even though rebalances are designed to be a background process, they can impact performance.
      </p>  

  </section>
   
    
    <section><title>Supported Upgrade Paths</title>
      
      <p>See <xref
        href="upgrade-matrix.dita#topic_dwm_qfv_xs">Upgrade Matrix</xref> for more information on
        the supported upgrade paths.</p>
      <p>Although infrequent, there may be times when an upgrade to an intermediate version is required before getting to the latest release.</p>
      <p>For information on Couchbase Server end-of-life dates, please see Couchbase <xref
          href="http://www.couchbase.com/support-policy" format="html" scope="external">support
          policy</xref>.</p>
    </section>
    <section><title>Preparing for an Upgrade</title>
      <p>Before upgrading your production cluster, be sure to test the upgrade process in a test environment that matches your production environment as closely as possible.</p>  
      <p>For each upgrade type mentioned above, there is an example checklist to help you start. </p>
     
   </section> 
    
    <section><title>Multi-Dimensional Scaling (MDS)</title><p>In Couchbase Server Enterprise Edition
        version 4.0+ the Data, Query, and Index Service workloads can all be independently scaled to
        isolate workloads. This feature is called <term>Multi-Dimensional Scaling (MDS)</term>.
      </p>While all nodes are part of a cluster, each node in the cluster might only run one or more
      services. For example, consider a seven-node cluster: three nodes run only the Data Service,
      two nodes run only the Indexing Service and two nodes run just the Query Service. In this
      example, each workload is isolated to a set of nodes. There are special considerations for
      most online upgrade options in an MDS cluster. For more information on this, see <xref
        href="upgrade-online.dita#topic_t2x_k2v_xs"/>.
       </section>

    <section><title>Downgrades and Limitations</title>
      <p>Once an upgrade of a single Couchbase Server cluster has started, you can roll back to the previous version as long as at least one node is on the previous version. For example, if you have three nodes upgraded to 4.5 and one still on 4.1.x, you can still roll all nodes back to 4.1.x.</p> 
      <p>Once all nodes in the cluster have been fully upgraded, the window for a rollback of that cluster has closed. For more information on the upgrade rollback, see (page).
      </p>
      <p>If you first upgrade a cluster but then decide to downgrade to a previous version, your
        only option is to set up another Couchbase Server cluster and use XDCR with the target
        cluster being the older version. Follow <xref
          href="upgrade-strategies.dita#topic_y23_jjv_xs/intercluster">Upgrading Using Intercluster
          Replication</xref>, having in mind that the new cluster would be the older version to
        which you are rolling back. </p>
     
   </section> 
  
    <section><title>Precautions for Couchbase Mobile’s Sync Gateway</title>
      <p>Take special precaution when upgrading Couchbase Server if you use the cluster in
        conjunction with <xref
          href="http://developer.couchbase.com/documentation/mobile/1.2/get-started/sync-gateway-overview/index.html"
          format="html" scope="external">Sync Gateway</xref></p>
      <p>Sync Gateway versions prior to v1.2 do not support the automatic handling of Couchbase Server cluster topology changes 
        for related buckets. An upgrade of Couchbase used with older versions of Sync 
        Gateway must carefully coordinate a manual reconfiguration of the Sync Gateway service connection between the key points in your upgrade process.</p> 
      <p>It is recommended first to upgrade all Couchbase Sync Gateways to at least version 1.2
        before upgrading the Couchbase Server cluster to which they are connected. </p> 
     
   </section> 
    
    <section><title>Upgrade FAQ</title>
      <dl>
        <dlentry>
          <dt>At which point in the upgrade process will the new features of the upgrade be available?</dt>
          <dd>Once every node in the cluster is upgraded to the target release, the new features of
            that release are available for use. Even if 90% of all nodes are upgraded, the cluster
            is still considered to be on the older revision, and newer features are
            unavailable.</dd>
        </dlentry>
      </dl>
      <dl>
        <dlentry>
          <dt>Do I have to upgrade the Couchbase client SDKs?</dt>
          <dd>You are not required to upgrade the client SDKs your applications use when you upgrade
            Couchbase Server. Couchbase client SDKs are forward and backward compatible. You may
            want to upgrade, however, because older client SDKs typically cannot take advantage of
            the newest Couchbase Server features.</dd>
          <dd>It is strongly recommended to verify periodically the version of client SDK being used
            by applications and to plan for regular upgrades. Every month Couchbase releases new
            versions that contain updates, bug fixes and new features for each SDK. For more

            information and release notes, see the supported client SDKs.</dd>

        </dlentry>
      </dl>   
      <dl>
        <dlentry>
          <dt>Can I upgrade from Couchbase Community Edition to Enterprise Edition?</dt>
          <dd>You can perform online and offline upgrade options when upgrading from Couchbase
            Server Community Edition to Enterprise Edition. Remember that Enterprise Edition is not
            free to run in production. If you are interested in upgrading to Couchbase Server
            Enterprise Edition, click <xref href="../introduction/editions.dita#couchbase-editions"
              >here</xref>. For more information on supported upgrade paths of Couchbase Server, see
            the <xref href="upgrade-matrix.dita#topic_dwm_qfv_xs">upgrade matrix.</xref></dd>
        </dlentry>
      </dl> 
      <dl>
        <dlentry>
          <dt>Do I need to uninstall and reinstall, or just upgrade the Couchbase Server package?</dt>
          <dd>For all platforms except Mac OS X, you only need to upgrade the package to the new
            version. Mac OS X may not upgrade successfully without an uninstall and reinstall. For

 
            uninstallation instructions, see <xref
              href="install-uninstalling.dita#concept_ixr_wsp_ts"/>.</dd>

        </dlentry>
      </dl> 
    </section>
  </body>
</topic>
