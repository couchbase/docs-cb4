<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="untitled2">
    <title>cbindex</title>
    <body>
        <p>Use the <codeph>cbindex</codeph> command to manually move indexes around.</p>
        <p><b>Syntax</b><codeblock>./cbindex -type move -index '<varname>index_name</varname>' -bucket <varname>default</varname> -with '{"nodes":["<varname>host</varname>:<varname>port</varname>"], "timeout":"<varname>time_sec</varname>"}'</codeblock></p>
        <dl>
            <dlentry>
                <dt>Arguments</dt>
                <dd>
                    <dl>
                        <dlentry>
                            <dt>-type</dt>
                            <dd>
                                <dl>
                                    <dlentry>
                                        <dt>move</dt>
                                        <dd>Moves an array of indexes and replicas to different
                                                nodes.<note>The length of the nodes array must be
                                                equal to the number of index replicas.</note></dd>
                                    </dlentry>
                                </dl>
                            </dd>
                        </dlentry>
                    </dl>
                    <dl>
                        <dlentry>
                            <dt>-index</dt>
                            <dd>The name of the index.</dd>
                        </dlentry>
                    </dl>
                    <dl>
                        <dlentry>
                            <dt>-bucket</dt>
                            <dd>The name of the keyspace.</dd>
                        </dlentry>
                    </dl>
                    <dl>
                        <dlentry>
                            <dt>-with</dt>
                            <dd>
                                <dl>
                                    <dlentry>
                                        <dt>"nodes"</dt>
                                        <dd>A node list specifying the new destination nodes for the
                                            index and its replicas. The full node list needs to be
                                            specified even if only 1 replica needs to be moved.</dd>
                                    </dlentry>
                                </dl>
                                <dl>
                                    <dlentry>
                                        <dt>"timeout"</dt>
                                        <dd>[Default is 120 seconds]</dd>
                                        <dd>Number of seconds until the command returns to the
                                            console.</dd>
                                        <dd>0 means unlimited timeout.</dd>
                                    </dlentry>
                                </dl>
                            </dd>
                        </dlentry>
                    </dl>
                </dd>
            </dlentry>
        </dl>
        <note>Move Index command will not work if a cluster is already running a rebalance.</note>
        <p><b>Example 1: Move a node.</b></p>
        <p>Move an Index node to
                10.17.6.32<codeblock>./cbindex -type move -index 'def_airportname' -bucket default -with '{"nodes":["10.17.6.32:8091"]}'</codeblock><b>Example
                2: Move a node with a replica.</b></p>
        <p>Move an Index and its replica to 10.17.6.32 and
            10.17.6.33.<codeblock>./cbindex -type move -index 'def_airportname' -bucket default -with '{"nodes":["10.17.6.32:8091","10.17.6.33:8091"]}'</codeblock></p>
        <section id="section_wwl_t1s_1cb">
            <title>Related Links</title>
            <p>
                <table frame="none" rowsep="0" colsep="0" id="table_z1h_v1s_1cb">
                    <tgroup cols="2" align="left">
                        <colspec colname="c1" colnum="1" colwidth="1*"/>
                        <colspec colname="c2" colnum="2" colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry><xref
                                        href="../n1ql/n1ql-language-reference/alterindex.dita#untitled1"
                                            ><codeph>ALTER INDEX</codeph></xref></entry>
                                <entry>Move Index via N1QL</entry>
                            </row>
                            <row>
                                <entry><codeph>curl /moveIndex</codeph></entry>
                                <entry>Move Index via REST API</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry/>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            </p>
        </section>
    </body>
</topic>
