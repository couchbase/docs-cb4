<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta description="A description of all configurable parameters for Couchbase Analytics.">
  </head>
  <body>
    <main role="main"><article role="article" aria-labelledby="ariaid-title1">
    <div class="body">
      <!--
 ! Copyright 2016-2018 Couchbase, Inc.
 !-->
<!-- 1st <h1> removed -->

<div class="note note"><span class="notetitle">Note:</span>
The configuration parameters for Analytics are
<a href="https://developer.couchbase.com/documentation/server/current/sdk/nodejs/compatibility-versions-features.html#net-feature-matrix__interface-stability">volatile</a>
in the Developer Preview.
They may change significantly in the future.
</div>

<p>Couchbase Analytics Service has a number of configuration settings to customize the cluster for its environment.</p>

<div class="note note"><span class="notetitle">Attention:</span> For the configuration changes to take effect,
the Analytics cluster must be restarted using the <a href="rest-analytics.html#Restart_API">Restart API</a>.
</div>

<p>The following parameters can be used with the <a href="rest-analytics.html#CC_Config_API">Cluster Controller Configuration API</a>
to configure the Analytics Service cluster controller.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>analyticsHttpRequestQueueSize</td>
      <td>The maximum number of HTTP requests to queue pending ability to execute</td>
      <td>256</td>
    </tr>
    <tr>
      <td>analyticsHttpThreadCount</td>
      <td>The number of threads to service HTTP requests</td>
      <td>16</td>
    </tr>
    <tr>
      <td>coresMultiplier</td>
      <td>The factor to multiply by the number of cores to determine maximum query concurrent execution level</td>
      <td>3</td>
    </tr>
    <tr>
      <td>enforceFrameWriterProtocol</td>
      <td>A flag indicating if runtime should enforce frame writer protocol and detect bad behaving operators</td>
      <td>false</td>
    </tr>
    <tr>
      <td>heartbeatMaxMisses</td>
      <td>Sets the maximum number of missed heartbeats before a node is marked as dead</td>
      <td>4</td>
    </tr>
    <tr>
      <td>heartbeatPeriod</td>
      <td>Sets the time duration between two heartbeats from each node controller in milliseconds</td>
      <td>30000</td>
    </tr>
    <tr>
      <td>jobHistorySize</td>
      <td>Limits the number of historical jobs remembered by the system to the specified value</td>
      <td>10</td>
    </tr>
    <tr>
      <td>jobQueueCapacity</td>
      <td>The maximum number of jobs to queue before rejecting new jobs</td>
      <td>4096</td>
    </tr>
    <tr>
      <td>profileDumpPeriod</td>
      <td>Sets the time duration between two profile dumps from each node controller in milliseconds; 0 to disable</td>
      <td>0</td>
    </tr>
    <tr>
      <td>resultSweepThreshold</td>
      <td>The duration within which an instance of the result cleanup should be invoked in milliseconds</td>
      <td>60000</td>
    </tr>
    <tr>
      <td>resultTtl</td>
      <td>Limits the amount of time results for asynchronous jobs should be retained by the system in milliseconds</td>
      <td>86400000</td>
    </tr>
  </tbody>
</table>

<p>The following parameters can be used with the <a href="rest-analytics.html#Node_Config_API">Node Configuration API</a>
to configure the Analytics Service nodes.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>activeMemoryGlobalBudget</td>
      <td>The memory budget (in bytes) for the active runtime</td>
      <td>67108864 (64 MB)</td>
    </tr>
    <tr>
      <td>analyticsHttpRequestQueueSize</td>
      <td>The maximum number of HTTP requests to queue pending ability to execute</td>
      <td>256</td>
    </tr>
    <tr>
      <td>analyticsHttpThreadCount</td>
      <td>The number of threads to service HTTP requests</td>
      <td>16</td>
    </tr>
    <tr>
      <td>clusterConnectRetries</td>
      <td>Number of attempts to contact CC before giving up</td>
      <td>5</td>
    </tr>
    <tr>
      <td>compilerFramesize</td>
      <td>The page size (in bytes) for computation</td>
      <td>32768 (32 kB)</td>
    </tr>
    <tr>
      <td>compilerGroupmemory</td>
      <td>The memory budget (in bytes) for a group by operator instance in a partition</td>
      <td>33554432 (32 MB)</td>
    </tr>
    <tr>
      <td>compilerJoinmemory</td>
      <td>The memory budget (in bytes) for a join operator instance in a partition</td>
      <td>33554432 (32 MB)</td>
    </tr>
    <tr>
      <td>compilerParallelism</td>
      <td>The degree of parallelism for query execution. Zero means to use the storage parallelism as the query execution parallelism, while other integer values dictate the number of query execution parallel partitions. The system will fall back to use the number of all available CPU cores in the cluster as the degree of parallelism if the number set by a user is too large or too small</td>
      <td>0</td>
    </tr>
    <tr>
      <td>compilerSortmemory</td>
      <td>The memory budget (in bytes) for a sort operator instance in a partition</td>
      <td>33554432 (32 MB)</td>
    </tr>
    <tr>
      <td>iodevices (read-only)</td>
      <td>Comma separated list of IO Device mount points</td>
      <td>&lt;data dir&gt;/@analytics/iodevice</td>
    </tr>
    <tr>
      <td>jvmArgs</td>
      <td>JVM args to pass to the NCDriver</td>
      <td>&lt;undefined&gt;</td>
    </tr>
    <tr>
      <td>logLevel</td>
      <td>The logging level</td>
      <td>INFO</td>
    </tr>
    <tr>
      <td>maxWaitActiveCluster</td>
      <td>The max pending time (in seconds) for cluster startup. After the threshold, if the cluster still is not up and running, it is considered unavailable</td>
      <td>60</td>
    </tr>
    <tr>
      <td>messagingFrameCount</td>
      <td>Number of reusable frames for NC to NC messaging</td>
      <td>512</td>
    </tr>
    <tr>
      <td>messagingFrameSize</td>
      <td>The frame size to be used for NC to NC messaging</td>
      <td>4096 (4 kB)</td>
    </tr>
    <tr>
      <td>metadataRegistrationTimeoutSecs</td>
      <td>how long in seconds to wait for the metadata node to register with the CC</td>
      <td>60</td>
    </tr>
    <tr>
      <td>netBufferCount</td>
      <td>Number of network buffers per input/output channel</td>
      <td>1</td>
    </tr>
    <tr>
      <td>netThreadCount</td>
      <td>Number of threads to use for Network I/O</td>
      <td>1</td>
    </tr>
    <tr>
      <td>resultManagerMemory</td>
      <td>Memory usable for result caching at this Node Controller in bytes</td>
      <td>-1 (-1 B)</td>
    </tr>
    <tr>
      <td>resultSweepThreshold</td>
      <td>The duration within which an instance of the result cleanup should be invoked in milliseconds</td>
      <td>60000</td>
    </tr>
    <tr>
      <td>resultTtl</td>
      <td>Limits the amount of time results for asynchronous jobs should be retained by the system in milliseconds</td>
      <td>86400000</td>
    </tr>
    <tr>
      <td>storageBuffercacheMaxopenfiles</td>
      <td>The maximum number of open files in the buffer cache</td>
      <td>2147483647</td>
    </tr>
    <tr>
      <td>storageBuffercachePagesize</td>
      <td>The page size in bytes for pages in the buffer cache</td>
      <td>131072 (128 kB)</td>
    </tr>
    <tr>
      <td>storageBuffercacheSize</td>
      <td>The size of memory allocated to the disk buffer cache.  The value should be a multiple of the buffer cache page size.</td>
      <td>1/4 of the allocated Analytics Service memory</td>
    </tr>
    <tr>
      <td>storageLsmBloomfilterFalsepositiverate</td>
      <td>The maximum acceptable false positive rate for bloom filters associated with LSM indexes</td>
      <td>0.01</td>
    </tr>
    <tr>
      <td>storageMaxActiveWritableDatasets</td>
      <td>The maximum number of datasets that can be concurrently modified</td>
      <td>8</td>
    </tr>
    <tr>
      <td>storageMemorycomponentGlobalbudget</td>
      <td>The size of memory allocated to the memory components.  The value should be a multiple of the memory component page size</td>
      <td>1/4 of the allocated Analytics Service memory</td>
    </tr>
    <tr>
      <td>storageMemorycomponentNumcomponents</td>
      <td>The number of memory components to be used per lsm index</td>
      <td>2</td>
    </tr>
    <tr>
      <td>storageMemorycomponentPagesize</td>
      <td>The page size in bytes for pages allocated to memory components</td>
      <td>131072 (128 kB)</td>
    </tr>
    <tr>
      <td>storageMetadataMemorycomponentNumpages</td>
      <td>The number of pages to allocate for a metadata memory component</td>
      <td>8</td>
    </tr>
  </tbody>
</table>

    </div>
    </article>
    </main>
  </body>
</html>
