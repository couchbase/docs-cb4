<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta description="Troubleshooting and FAQs.">
    <title>Troubleshooting and FAQs</title>
  </head>
  <body>
    <main role="main"><article role="article" aria-labelledby="ariaid-title1">
    <div class="body">
      <h1 id="troubleshooting-and-faqs">Troubleshooting and FAQs</h1>

<p>This section lists most common errors and gives general tips.
Without losing generality, we use the <a href="single_machine.html">single machine setup</a> as a running example.</p>

<h2 id="viewing-logs"><a id="Viewing_logs">Viewing Logs</a></h2>

<p>Log files are located in your Analytics installation folder.</p>

<ul>
  <li>
    <p>On Linux or Mac OS X systems:</p>

    <p>cbas/opt/local/logs</p>
  </li>
  <li>
    <p>On Windows systems:</p>

    <p>cbas\opt\local\logs</p>
  </li>
</ul>

<p>In the logs folder, the following 3 log files are created:</p>

<ul>
  <li>
    <p>cc.log -  the cluster controller log</p>
  </li>
  <li>
    <p>blue-service.log - the log on the node controller with name “blue”</p>
  </li>
  <li>
    <p>red-service.log - the long on the node controller with name “red”</p>
  </li>
</ul>

<p>Analytics employs massive parallel processing. In this example environment, there are two slave nodes named
red and blue that each maintains a separate log.</p>

<h2 id="reporting-an-issue"><a id="Reporint_an_issue">Reporting an Issue</a></h2>

<p>Good bug reports save a lot of time for everyone involved. During the developer preview, we suggest that you post
your questions and bug reports to the <a href="https://forums.couchbase.com/c/analytics">Couchbase Forum</a>.
When reporting an issue, please include the following information:</p>

<ul>
  <li>
    <p>Description of the issue</p>
  </li>
  <li>
    <p>Version information:  by running the following command:</p>

    <p>$ bin/cbashelper install_version</p>
  </li>
</ul>

<p>or</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ curl http://localhost:8095/analytics/version
</code></pre>
</div>

<p>results:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"build.date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mon Mar 27 18:45:39 PDT 2017"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"build.number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"651"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"build.version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0-DP2"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"projects"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"build"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"revision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"452b963f17a52d1f69b04a8e88ef05999703ab9a"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"upstream"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"analytics-dcp-client"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"revision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34f234700d4a53337269c364976c8bd2ab8f43c5"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"upstream"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"analytics"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"revision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54ffece620012f068f9f492af140b032a361a039"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"upstream"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asterix-opt"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"revision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7c9f33f0a5166f9d7cfac9cdf81e97335be5179d"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"upstream"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li>
    <p>Steps to reproduce the issue</p>
  </li>
  <li>
    <p><a href="#Viewing_logs">Logs</a>: cc.log, blue-service.log, and red-service.log</p>
  </li>
  <li>
    <p>Cluster configuration by running the following commands:</p>

    <p>$ curl http://localhost:8095/analytics/cluster/cc/config
  $ curl http://localhost:8095/analytics/cluster/blue/config
  $ curl http://localhost:8095/analytics/cluster/red/config</p>
  </li>
  <li>
    <p>Thread dumps by running the following commands:</p>

    <p>$ curl http://localhost:8095/analytics/cluster/cc/threaddump
  $ curl http://localhost:8095/analytics/cluster/blue/threaddump
  $ curl http://localhost:8095/analytics/cluster/red/threaddump</p>
  </li>
</ul>

<h2 id="monitoring-the-java-processes"><a id="Monitoring">Monitoring the Java Processes</a></h2>
<p>If you run top or a similar tool, you can simply see processes called Java without much information.
You can get more information about what is happening in those Java processes by using
<a href="http://docs.oracle.com/javase/7/docs/technotes/tools/share/jps.html">jps - Java Virtual Machine
Process Status Tool</a>. If you aren’t running other Java processes, jps will show you something
similar to the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jps
76993 NCService
76992 NCService
76994 CCDriver
77010 NCDriver
77012 NCDriver
77049 Jps
</code></pre>
</div>

<p>More details can be obtained by using the -v flag:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ jps -v
76993 NCService -Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager -Dapp.name=cbasncservice -Dapp.pid=76993 -Dapp.repo=/Users/will/code/cbas/repo -Dapp.home=/Users/will/code/cbas -Dbasedir=/Users/will/code/cbas
76992 NCService -Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager -Dapp.name=cbasncservice -Dapp.pid=76992 -Dapp.repo=/Users/will/code/cbas/repo -Dapp.home=/Users/will/code/cbas -Dbasedir=/Users/will/code/cbas
76994 CCDriver -Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager -Dapp.name=cbascc -Dapp.pid=76994 -Dapp.repo=/Users/will/code/cbas/repo -Dapp.home=/Users/will/code/cbas -Dbasedir=/Users/will/code/cbas
77010 NCDriver -Xmx1536m -Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager -Dapp.name=cbasnc -Dapp.pid=77010 -Dapp.repo=/Users/will/code/cbas/repo -Dapp.home=/Users/will/code/cbas -Dbasedir=/Users/will/code/cbas
77074 Jps -Dapplication.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home -Xms8m
77012 NCDriver -Xmx1536m -Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager -Dapp.name=cbasnc -Dapp.pid=77012 -Dapp.repo=/Users/will/code/cbas/repo -Dapp.home=/Users/will/code/cbas -Dbasedir=/Users/will/code/cbas
</code></pre>
</div>

<h2 id="sending-feedback"><a id="Sending_feedback">Sending Feedback</a></h2>
<p>We’d love to hear from you! Feel free to post your feedback to the
<a href="https://forums.couchbase.com/c/analytics">Couchbase Forum</a>.</p>

<h2 id="faqs"><a id="FAQs">FAQs</a></h2>
<p><strong>Q: What’s the relationship between N1QL and SQL++?</strong></p>

<p>SQL++ is a formal <a href="https://arxiv.org/abs/1405.3631">language specification</a> with well-defined semantics that
was designed with the goal of providing a clean, unifying, powerful, declarative query language for handling
semi-structured data. N1QL is the query language used for the Couchbase Server query service,
and SQL++ is the language used for Analytics.
The itemized differences are summarized <a href="6_n1ql.html">here</a>.</p>

<p><strong>Q: Can I use this with memcached buckets?</strong></p>

<p>No, Analytics relies on DCP and JSON formatted documents. It can only be used with JSON coming from a Couchbase bucket.</p>

<p><strong>Q: How do I read error messages that are returned from my queries?</strong></p>

<p>Please refer to the <a href="4_error.html">error documentation</a>.</p>


    </div>
    </article>
    </main>
  </body>
</html>
