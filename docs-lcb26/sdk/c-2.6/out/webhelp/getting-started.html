
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="The Couchbase C SDK ( libcouchbase ) enables C and C++ programs to access a Couchbase cluster. The C SDK is also commonly used as a core dependency of SDKs written in other language to provide a ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Getting Started"></meta><meta name="abstract" content="The Couchbase C SDK (libcouchbase) enables C and C++ programs to access a Couchbase cluster. The C SDK is also commonly used as a core dependency of SDKs written in other language to provide a common implementation and high performance."></meta><meta name="description" content="The Couchbase C SDK (libcouchbase) enables C and C++ programs to access a Couchbase cluster. The C SDK is also commonly used as a core dependency of SDKs written in other language to provide a common implementation and high performance."></meta><meta name="DC.Relation" scheme="URI" content="c-intro.html"></meta><meta name="DC.Relation" scheme="URI" content="c-intro.html"></meta><meta name="DC.Relation" scheme="URI" content="managing-data.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_zhc_crm_pp"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Getting Started</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="concept_zhc_crm_pp">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="c-intro.html" title="C SDK 2.6">C SDK 2.6</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="c-intro.html" title="C SDK 2.6"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C SDK 2.6</span></a></span>  
<span class="navprev"><a class="link" href="c-intro.html" title="C SDK 2.6"><span class="navheader_label">Previous topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C SDK 2.6</span></a></span>  
<span class="navnext"><a class="link" href="managing-data.html" title="Managing Data"><span class="navheader_label">Next topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Managing Data</span></a></span>  </div></td></tr></tbody></table>

    <h1 class="title topictitle1">Getting Started</h1>

    
    <div class="body conbody"><p class="shortdesc">The Couchbase C SDK (<samp class="ph codeph">libcouchbase</samp>) enables C and C++ programs to access
        a Couchbase cluster. The C SDK is also commonly used as a core dependency of SDKs written in
        other language to provide a common implementation and high performance.</p>

        <div class="section"><h2 class="title sectiontitle">Features</h2>
            
            <div class="p">
                <div class="note note"><span class="notetitle">Note:</span> See the full feature matrix to see which features are available for which
                    versions.</div>

                <ul class="ul" id="concept_zhc_crm_pp__ul_uny_zlc_bv">
                    <li class="li">Cross-Platform: Officially supported on <em class="ph i">Linux</em>, <em class="ph i">Mac OS X</em>, and
                        <em class="ph i">Microsoft Windows</em> (though it is also known to run on other
                        platforms).</li>

                    <li class="li">Key-Value (CRUD) operations (<span class="keyword apiname">lcb_get3</span>,
                        <span class="keyword apiname">lcb_store3</span>, etc.)</li>

                    <li class="li">N1QL query operations (<span class="keyword apiname">lcb_n1ql_query</span>)</li>

                    <li class="li">Map Reduce (view) query operations (<span class="keyword apiname">lcb_view_query</span>)</li>

                    <li class="li">Secure SSL connections (Couchbase Enterprise only)</li>

                    <li class="li">Pluggable non-blocking event loops such as <strong class="ph b">libevent</strong> and <strong class="ph b">libuv</strong>-
                        integrate with your own non-blocking application, or use
                        <span class="keyword apiname">lcb_wait</span> in blocking code</li>

                </ul>

            </div>

        </div>

        <div class="section"><h2 class="title sectiontitle">Installation and Downloads</h2>We recommend installing via your system's
            native package format when possible. The following one-liners can be used to install the
            binary versions of the
            SDK:<div style="margin-bottom: 0;"><strong>Linux</strong></div><pre class="pre codeblock">wget http://packages.couchbase.com/clients/c/couchbase-csdk-setup &amp;&amp; sudo perl couchbase-csdk-setup</pre>
<div style="margin-bottom: 0;"><strong>Mac OS X</strong></div><pre class="pre codeblock">brew update &amp;&amp; brew install libcouchbase</pre>
The
            full <a class="xref" href="download-install.html#c-download-install" title="You can install the C SDK from a repository for your platform, download prebuilt binaries or compile from source.">Download and API Reference</a> section has installation
            instructions for Microsoft Windows as well as additional installation methods for all
            platforms (including source and older binary versions)</div>

        <div class="section"><h2 class="title sectiontitle">Documentation and examples</h2>
            
            <div class="p">
                <ul class="ul" id="concept_zhc_crm_pp__ul_hyq_xnc_bv">
                    <li class="li">A reference guide (this manual) is suitable for a general overview and
                        learning how to use the library.</li>

                    <li class="li">The API documentation (<a class="xref" href="download-install.html#c-download-install" title="You can install the C SDK from a repository for your platform, download prebuilt binaries or compile from source.">Download and API Reference</a>) is generated from comments in the
                        header and covers all the APIs of the library.</li>

                    <li class="li">Small standalone examples can be found in the <a class="xref" href="https://github.com/couchbase/libcouchbase/tree/master/example" target="_blank">github repository</a></li>

                    <li class="li">Other Couchbase SDKs are written on top of the C SDK and show more complex
                        usage of the library's features:<ul class="ul" id="concept_zhc_crm_pp__ul_i2y_l4c_bv">
                            <li class="li"><a class="xref" href="https://github.com/couchbase/couchbase-python-client" target="_blank">Python SDK</a></li>

                            <li class="li"><a class="xref" href="https://github.com/couchbase/couchnode" target="_blank">Node.js SDK</a></li>

                        </ul>
</li>

                    <li class="li">The library's own <samp class="ph codeph">cbc</samp> (<a class="xref" href="https://github.com/couchbase/libcouchbase/blob/master/tools/cbc.cc" target="_blank">https://github.com/couchbase/libcouchbase/blob/master/tools/cbc.cc</a>) and <samp class="ph codeph">cbc-pillowfight</samp>
                        (<a class="xref" href="https://github.com/couchbase/libcouchbase/blob/master/tools/cbc-pillowfight.cc" target="_blank">https://github.com/couchbase/libcouchbase/blob/master/tools/cbc-pillowfight.cc</a>) utilities. Note that these tools may
                        use internal APIs not intended for public use.</li>

                    <li class="li">C++11 wrapper (<a class="xref" href="https://github.com/couchbaselabs/libcouchbase-cxx" target="_blank">https://github.com/couchbaselabs/libcouchbase-cxx</a>)</li>

                </ul>

            </div>

        </div>

        <div class="section"><h2 class="title sectiontitle">Hello Couchbase</h2>A simple example below (requires version 2.5.6 or
            higher to function). Error checking is omitted for
            brevity.<pre class="pre codeblock">#include &lt;libcouchbase/couchbase.h&gt;

static void
opCallback(lcb_t instance, int cbtype, const lcb_RESPBASE *rb) {
    fprintf(stderr, "%.*s: %s... ", (int)rb-&gt;nkey, rb-&gt;key, lcb_strcbtype(cbtype));
    if (rb-&gt;rc != LCB_SUCCESS) {
        fprintf(stderr, "%s\n", lcb_strerror(NULL, rb-&gt;rc));
    } else {
        fprintf(stderr, "OK");
        if (cbtype == LCB_CALLBACK_GET) {
            const lcb_RESPGET *rg = (const lcb_RESPGET *)rb;
            fprintf(stderr, "... Value: %.*s\n", (int)rg-&gt;nvalue, rg-&gt;value);
        } else {
            fprintf(stderr, "\n");
        }
    }
}

int main(int argc, char **argv)
{
    assert(lcb_version_g &gt;= 0x020506 &amp;&amp; "This example requires 2.5.6 or greater");

    lcb_t instance = NULL;
    lcb_create_st crst;
    memset(&amp;crst, 0, sizeof crst);
    crst.version = 3;
    crst.v.v3.connstr = "couchbase://localhost";
    lcb_create(&amp;instance, &amp;crst);
    lcb_connect(instance);
    lcb_wait(instance);

    lcb_install_callback3(instance, LCB_CALLBACK_GET, opCallback);
    lcb_install_callback3(instance, LCB_CALLBACK_STORE, opCallback);

    lcb_CMDSTORE scmd = { 0 };
    LCB_CMD_SET_KEY(&amp;scmd, "key", 3);
    LCB_CMD_SET_VALUE(&amp;scmd, "true", 4);
    scmd.operation = LCB_SET;
    lcb_store3(instance, NULL, &amp;scmd);
    lcb_wait(instance);

    lcb_CMDGET gcmd = { 0 };
    LCB_CMD_SET_KEY(&amp;gcmd, "key", 3);
    lcb_get3(instance, NULL, &amp;gcmd);
    lcb_wait(instance);
    lcb_destroy(instance);

    return 0;
}</pre>
</div>

        
        <div class="section"><h2 class="title sectiontitle">Scheduling, Blocking and non-blocking</h2>
            
            <p class="p">The library is designed to be non-blocking. As opposed to a blocking API where API
                calls themselves perform the operations and return results, the C SDK's non-blocking
                API <em class="ph i">schedules</em> the operation, with the result of the operation being passed to
                a callback which is invoked when ready. The readiness and completion of an operation
                will only happen when the library has had a chance to send the operation to the
                server and await a response from the network.</p>

            <p class="p">Most operations in the library do not <em class="ph i">executre</em>the operation immediately, but
                rather <em class="ph i">schedule</em> it to be executed when it is possible to perform network
                I/O.</p>

            <p class="p">The <span class="keyword apiname">lcb_wait()</span> function will instruct the library to send all
                scheduled operations to the cluster and await the results for those operations. As
                results become available, designated callbacks (specified using
                <span class="keyword apiname">lcb_install_callback3()</span>) are invoked with the results.</p>

            <p class="p">If your application is built on top of an event loop (for example, <em class="ph i">libev</em>) you
                can integrate the C SDK to perform its I/O within the context of your event loop,
                avoiding the need to block for I/O with <span class="keyword apiname">lcb_wait()</span>.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Library Handle</h2>
            
            <p class="p">Almost all operations within the library are done with a library handle of type
                <span class="keyword apiname">lcb_t</span>. The <span class="keyword apiname">lcb_t</span> is a handle representing
                a connection to a single bucket (though it is possible to access other buckets as
                well for certain operations).</p>

            <p class="p">An <span class="keyword apiname">lcb_t</span> is created using the <span class="keyword apiname">lcb_create()</span>
                function. Once created the handle must be connected:
                <span class="keyword apiname">lcb_connect()</span> schedules the connection and
                <span class="keyword apiname">lcb_wait</span> waits for the connection to complete. Once
                <span class="keyword apiname">lcb_wait</span> returns, <span class="keyword apiname">lcb_get_bootstrap_status</span>
                may be used to determine if the connection completed successfully.</p>

            <p class="p">Once the handle has been successfully connected it may then be used for data
                access.</p>

            <p class="p">When the library handle is no longer needed, it can be destroyed via
                    <span class="keyword apiname">lcb_destroy()</span>.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Data Access</h2>
            
            <p class="p">Once the handle has been connected, it may be used to access data using the KV, N1QL,
                and MapReduce APIs</p>

        </div>

    </div>

<div class="related-links"></div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="c-intro.html" title="C SDK 2.6"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C SDK 2.6</span></a></span>  
<span class="navprev"><a class="link" href="c-intro.html" title="C SDK 2.6"><span class="navheader_label">Previous topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C SDK 2.6</span></a></span>  
<span class="navnext"><a class="link" href="managing-data.html" title="Managing Data"><span class="navheader_label">Next topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Managing Data</span></a></span>  </div><div class="footer">WebHelp output generated by<a href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a> - Trial Edition</div>
</body>
</html>